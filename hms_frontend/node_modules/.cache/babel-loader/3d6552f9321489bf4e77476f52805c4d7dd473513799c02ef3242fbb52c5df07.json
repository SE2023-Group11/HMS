{"ast":null,"code":"import { ref, watchEffect } from 'vue';\nimport axios from 'axios';\nimport Card from 'primevue/card';\nimport InputText from 'primevue/inputtext';\nimport Button from 'primevue/button';\nimport Dialog from 'primevue/dialog';\nexport default {\n  __name: 'RoomInfo',\n  props: {\n    name: String,\n    info: String\n  },\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const props = __props;\n    let showContent = ref(props.info);\n    watchEffect(() => {\n      showContent.value = props.info;\n    });\n    let newInfo = ref('');\n    let visible = ref(false);\n    let notice = ref(\"\");\n    let token = \"eyJhbGciOiJIUzI1NiJ9.eyJub3dMb2dnZWRJblR5cGUiOiJub3dMb2dnZWRJblR5cGVBZG1pbiIsIm5vd0xvZ2dlZEluSWQiOiIxIiwiaWF0IjoxNjg0NzQ2OTQxLCJleHAiOjE2ODY1NDY5NDF9.npgDMKJW-7zrsoAlBmdtuWbQNqzhi_0bBzjXieLqKu8\";\n    function sendChange() {\n      console.log(newInfo.value);\n      axios({\n        method: 'post',\n        url: 'http://121.199.161.134:8080/changeRoomInfo',\n        params: {\n          roomName: props.name,\n          roomInfo: newInfo.value,\n          token: token\n        }\n      }).then(res => {\n        console.log(res);\n        notice.value = \"信息修改成功！\";\n        visible.value = true;\n        newInfo.value = \"\";\n        axios({\n          method: 'post',\n          url: 'http://121.199.161.134:8080/getRoomInfo',\n          params: {\n            roomName: props.name\n          }\n        }).then(s => {\n          console.log(s);\n          if (s.data.code == 0) {\n            window.alert(\"请求错误，原因为\" + s.data.msg);\n          } else {\n            showContent.value = s.data.data;\n          }\n        }).catch(err => {\n          window.alert(\"请求错误，原因为\" + err);\n        });\n      }).catch(err => {\n        notice.value = \"信息修改失败！失败原因：\" + err.value;\n        visible.value = true;\n      });\n    }\n    const __returned__ = {\n      get props() {\n        return props;\n      },\n      set props(v) {\n        props = v;\n      },\n      get showContent() {\n        return showContent;\n      },\n      set showContent(v) {\n        showContent = v;\n      },\n      get newInfo() {\n        return newInfo;\n      },\n      set newInfo(v) {\n        newInfo = v;\n      },\n      get visible() {\n        return visible;\n      },\n      set visible(v) {\n        visible = v;\n      },\n      get notice() {\n        return notice;\n      },\n      set notice(v) {\n        notice = v;\n      },\n      get token() {\n        return token;\n      },\n      set token(v) {\n        token = v;\n      },\n      sendChange,\n      ref,\n      watchEffect,\n      get axios() {\n        return axios;\n      },\n      get Card() {\n        return Card;\n      },\n      get InputText() {\n        return InputText;\n      },\n      get Button() {\n        return Button;\n      },\n      get Dialog() {\n        return Dialog;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","watchEffect","axios","Card","InputText","Button","Dialog","showContent","props","info","value","newInfo","visible","notice","token","sendChange","console","log","method","url","params","roomName","name","roomInfo","then","res","s","data","code","window","alert","msg","catch","err"],"sources":["D:/Desktop/HMS-front-end/hms_frontend/src/manager/components/infoManage/RoomInfo.vue"],"sourcesContent":["<template>\r\n    <div style=\"display:flex; justify-content:center; align-items:center;\">\r\n        <div class=\"card\">\r\n            <Card style=\"width: 50em\">\r\n                <template #title>\r\n                    <div  style=\"text-align: center;\">\r\n                        {{ props.name }} \r\n                    </div>\r\n                </template>\r\n                <template #content>\r\n                    <table>\r\n                        <tr>\r\n                            <td style=\"width: 120px; vertical-align: top;\">科室介绍：</td>\r\n                            <td style=\"text-align: left;\">{{ showContent }}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td style=\"vertical-align: middle;\">修改内容：</td>\r\n                            <td style=\"vertical-align: bottom;\">\r\n                                <br/>\r\n                                <InputText type=\"text\" v-model=\"newInfo\" placeholder=\"请输入修改后信息\" style=\"width:640px; word-break:break-all;\"/><br/><br/>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colspan=\"2\" style=\"text-align: center;\"><Button @click=\"sendChange\" >提交</Button></td>\r\n                        </tr>\r\n                    </table>\r\n                </template>\r\n            </Card>\r\n        </div>\r\n    </div>\r\n    <Dialog v-model:visible=\"visible\" modal header=\"提示\" :style=\"{ width: '30vw' }\">\r\n        {{ notice }}\r\n    </Dialog>\r\n    \r\n</template>\r\n<script setup>\r\nimport {ref, watchEffect} from 'vue'\r\nimport { defineProps } from 'vue';\r\nimport axios from 'axios';\r\n\r\nimport Card from 'primevue/card'\r\nimport InputText from 'primevue/inputtext';\r\nimport Button from 'primevue/button';\r\nimport Dialog from 'primevue/dialog';\r\n\r\nlet props = defineProps({name: String, info: String})\r\nlet showContent = ref(props.info)\r\nwatchEffect(()=>{\r\n    showContent.value = props.info\r\n})\r\nlet newInfo = ref('')\r\nlet visible = ref(false)\r\nlet notice = ref(\"\")\r\nlet token = \"eyJhbGciOiJIUzI1NiJ9.eyJub3dMb2dnZWRJblR5cGUiOiJub3dMb2dnZWRJblR5cGVBZG1pbiIsIm5vd0xvZ2dlZEluSWQiOiIxIiwiaWF0IjoxNjg0NzQ2OTQxLCJleHAiOjE2ODY1NDY5NDF9.npgDMKJW-7zrsoAlBmdtuWbQNqzhi_0bBzjXieLqKu8\"\r\n\r\nfunction sendChange() {\r\n    console.log(newInfo.value)\r\n    axios({\r\n        method: 'post',\r\n        url: 'http://121.199.161.134:8080/changeRoomInfo',\r\n        params: {\r\n            roomName:props.name,\r\n            roomInfo:newInfo.value,\r\n            token:token\r\n        }\r\n    }).then((res)=>{\r\n        console.log(res)\r\n        notice.value = \"信息修改成功！\"\r\n        visible.value = true\r\n        newInfo.value = \"\"\r\n        axios({\r\n            method: 'post',\r\n            url: 'http://121.199.161.134:8080/getRoomInfo',\r\n            params:{\r\n                roomName:props.name\r\n            }\r\n        }).then((s)=>{\r\n            console.log(s)\r\n            if(s.data.code==0)\r\n            {\r\n                window.alert(\"请求错误，原因为\"+s.data.msg)\r\n            }\r\n            else\r\n            {\r\n                showContent.value = s.data.data\r\n            }\r\n        }).catch((err)=>{\r\n            window.alert(\"请求错误，原因为\"+err)\r\n        })\r\n    }).catch((err)=>{\r\n        notice.value = \"信息修改失败！失败原因：\"+err.value\r\n        visible.value = true\r\n    })\r\n}\r\n\r\n</script>"],"mappings":"AAoCA,SAAQA,GAAG,EAAEC,WAAW,QAAO,KAAK;AAEpC,OAAOC,KAAK,MAAM,OAAO;AAEzB,OAAOC,IAAI,MAAM,eAAe;AAChC,OAAOC,SAAS,MAAM,oBAAoB;AAC1C,OAAOC,MAAM,MAAM,iBAAiB;AACpC,OAAOC,MAAM,MAAM,iBAAiB;;;;;;;;;;;;IAGpC,IAAIC,WAAW,GAAGP,GAAG,CAACQ,KAAK,CAACC,IAAI,CAAC;IACjCR,WAAW,CAAC,MAAI;MACZM,WAAW,CAACG,KAAK,GAAGF,KAAK,CAACC,IAAI;IAClC,CAAC,CAAC;IACF,IAAIE,OAAO,GAAGX,GAAG,CAAC,EAAE,CAAC;IACrB,IAAIY,OAAO,GAAGZ,GAAG,CAAC,KAAK,CAAC;IACxB,IAAIa,MAAM,GAAGb,GAAG,CAAC,EAAE,CAAC;IACpB,IAAIc,KAAK,GAAG,mMAAmM;IAE/M,SAASC,UAAUA,CAAA,EAAG;MAClBC,OAAO,CAACC,GAAG,CAACN,OAAO,CAACD,KAAK,CAAC;MAC1BR,KAAK,CAAC;QACFgB,MAAM,EAAE,MAAM;QACdC,GAAG,EAAE,4CAA4C;QACjDC,MAAM,EAAE;UACJC,QAAQ,EAACb,KAAK,CAACc,IAAI;UACnBC,QAAQ,EAACZ,OAAO,CAACD,KAAK;UACtBI,KAAK,EAACA;QACV;MACJ,CAAC,CAAC,CAACU,IAAI,CAAEC,GAAG,IAAG;QACXT,OAAO,CAACC,GAAG,CAACQ,GAAG,CAAC;QAChBZ,MAAM,CAACH,KAAK,GAAG,SAAS;QACxBE,OAAO,CAACF,KAAK,GAAG,IAAI;QACpBC,OAAO,CAACD,KAAK,GAAG,EAAE;QAClBR,KAAK,CAAC;UACFgB,MAAM,EAAE,MAAM;UACdC,GAAG,EAAE,yCAAyC;UAC9CC,MAAM,EAAC;YACHC,QAAQ,EAACb,KAAK,CAACc;UACnB;QACJ,CAAC,CAAC,CAACE,IAAI,CAAEE,CAAC,IAAG;UACTV,OAAO,CAACC,GAAG,CAACS,CAAC,CAAC;UACd,IAAGA,CAAC,CAACC,IAAI,CAACC,IAAI,IAAE,CAAC,EACjB;YACIC,MAAM,CAACC,KAAK,CAAC,UAAU,GAACJ,CAAC,CAACC,IAAI,CAACI,GAAG,CAAC;UACvC,CAAC,MAED;YACIxB,WAAW,CAACG,KAAK,GAAGgB,CAAC,CAACC,IAAI,CAACA,IAAI;UACnC;QACJ,CAAC,CAAC,CAACK,KAAK,CAAEC,GAAG,IAAG;UACZJ,MAAM,CAACC,KAAK,CAAC,UAAU,GAACG,GAAG,CAAC;QAChC,CAAC,CAAC;MACN,CAAC,CAAC,CAACD,KAAK,CAAEC,GAAG,IAAG;QACZpB,MAAM,CAACH,KAAK,GAAG,cAAc,GAACuB,GAAG,CAACvB,KAAK;QACvCE,OAAO,CAACF,KAAK,GAAG,IAAI;MACxB,CAAC,CAAC;IACN"},"metadata":{},"sourceType":"module","externalDependencies":[]}