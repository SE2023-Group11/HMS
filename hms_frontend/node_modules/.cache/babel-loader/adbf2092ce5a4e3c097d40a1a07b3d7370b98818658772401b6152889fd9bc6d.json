{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: 'CheckMyAppointment',\n  data() {\n    return {\n      appointments: [],\n      filters: {\n        global: {\n          value: \"\"\n        }\n      }\n    };\n  },\n  methods: {\n    removeTAndBefore(str) {\n      const index = str.indexOf('T');\n      return str.substring(index + 1);\n    },\n    deleteAppointment(orderId) {\n      axios.delete(`http://121.199.161.134:8080/deleteAppointment`, {\n        params: {\n          token: \"eyJhbGciOiJIUzI1NiJ9.eyJub3dMb2dnZWRJblR5cGUiOiJub3dMb2dnZWRJblR5cGVQYXRpZW50Iiwibm93TG9nZ2VkSW5JZCI6IlAwMDAwMDAwMDAwMCIsImlhdCI6MTY4NDc0NTUxOCwiZXhwIjoxNjg2NTQ1NTE4fQ.5dh7XJTkDsaVpHrsTBw4YGs8lnKdY1GRnNCgbJZLtC0\",\n          orderId: orderId\n        }\n      }).then(response => {\n        console.log(response);\n        if (response.data.code == 0) {\n          alert(response.data.msg + \"，取消失败\");\n        } else {\n          alert(\"成功取消预约\");\n          this.getPatientAppointment();\n        }\n      }).catch(error => {\n        console.error(error);\n      });\n    },\n    getPatientAppointment() {\n      axios.get('http://121.199.161.134:8080/getPatientAppointment', {\n        params: {\n          token: \"eyJhbGciOiJIUzI1NiJ9.eyJub3dMb2dnZWRJblR5cGUiOiJub3dMb2dnZWRJblR5cGVQYXRpZW50Iiwibm93TG9nZ2VkSW5JZCI6IlAwMDAwMDAwMDAwMCIsImlhdCI6MTY4NDc0NTUxOCwiZXhwIjoxNjg2NTQ1NTE4fQ.5dh7XJTkDsaVpHrsTBw4YGs8lnKdY1GRnNCgbJZLtC0\"\n        }\n      }).then(response => {\n        this.appointments = response.data.data;\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    getSeverity(orderStatus) {\n      if (orderStatus === 1) {\n        return \"success\";\n      } else if (orderStatus === 2) {\n        return \"danger\";\n      } else if (orderStatus === 3) {\n        return \"warning\";\n      } else {\n        return \"\";\n      }\n    },\n    getStatusValue(orderStatus) {\n      if (orderStatus === 1) {\n        return \"已完成\";\n      } else if (orderStatus === 2) {\n        return \"已失约\";\n      } else if (orderStatus === 3) {\n        return \"待就诊\";\n      } else {\n        return \"\";\n      }\n    },\n    showList() {\n      var list = this.$refs.headerList;\n      list.style.display = \"block\";\n    },\n    unShowList() {\n      var list = this.$refs.headerList;\n      list.style.display = \"none\";\n    }\n  },\n  mounted() {\n    this.getPatientAppointment();\n  }\n};","map":{"version":3,"names":["axios","name","data","appointments","filters","global","value","methods","removeTAndBefore","str","index","indexOf","substring","deleteAppointment","orderId","delete","params","token","then","response","console","log","code","alert","msg","getPatientAppointment","catch","error","get","getSeverity","orderStatus","getStatusValue","showList","list","$refs","headerList","style","display","unShowList","mounted"],"sources":["D:\\大二下\\软件工程\\Clone\\HMS-front-end\\hms_frontend\\src\\views\\CheckMyAppointment.vue"],"sourcesContent":["<template>\r\n    <div class=\"background\"></div>\r\n    <div class=\"container\" id=\"container\">\r\n      <div class=\"header\">\r\n        <img src=\"https://f.pz.al/pzal/2023/05/19/d218206d1e4dd.png\" alt=\"\" class=\"header_img\" />\r\n        <h1 class=\"header_tag\">HMS医院门诊预约系统</h1>\r\n        <div class=\"header_user\" @mouseenter=\"showList\" @mouseleave=\"unShowList\">\r\n          <!-- 显示头像 -->\r\n          <img src=\"https://f.pz.al/pzal/2023/05/03/5e6420e7ffe6f.png\" alt=\"\" class=\"header_user_img\" />\r\n          <!-- 未登录时显示登录/注册 -->\r\n          <!-- 登录后显示用户名 -->\r\n          <h1 class=\"header_user_word\">登录/注册</h1>\r\n          <div id=\"triangle-down\"></div>\r\n  \r\n          <div id=\"header_list\" ref=\"headerList\">\r\n            <div class=\"header_list_item\">个人主页</div>\r\n            <div class=\"header_list_item\">消息通知</div>\r\n            <div class=\"header_list_item\">账号注销</div>\r\n            <div class=\"header_list_item\">退出登录</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  \r\n      <div class=\"main\">\r\n        <div class=\"globalMenu\">\r\n            <span class=\"pi-map-marker\"></span>\r\n            &nbsp;\r\n            <router-link :to=\"'/PatientRoot'\" style=\"text-decoration: none;color:gray;\">首页</router-link>\r\n            &nbsp;>&nbsp;\r\n            <router-link :to=\"'/CheckMyAppointment'\" style=\"text-decoration: none;color:gray;\">我的预约</router-link>\r\n        </div>\r\n\r\n        <div class=\"table\">\r\n            <DataTable :value=\"appointments\" v-model:filters=\"filters\">\r\n                <template #header>\r\n                    <div class=\"search-container\">\r\n                        <span class=\"p-input-icon-left\">\r\n                            <i class=\"pi pi-search\" />\r\n                            <InputText v-tooltip.top=\"'输入关键词'\" v-model=\"filters['global'].value\" placeholder=\"全表搜索\" />\r\n                        </span>\r\n                    </div>\r\n                </template>\r\n\r\n                <template #empty> 暂无符合条件的预约记录 </template>\r\n                <template #loading> 正在加载，请稍后 </template>\r\n                <div class=\"content-container\">\r\n                    <Column field=\"orderId\" header=\"预约id\" sortable filterBy=\"orderId\" :globalFilter=\"filters['global'].value\"></Column>\r\n                    <Column field=\"patientId\" header=\"患者id\" sortable filterBy=\"patientId\" :globalFilter=\"filters['global'].value\"></Column>\r\n                    <Column field=\"doctorId\" header=\"医生id\" sortable filterBy=\"doctorId\" :globalFilter=\"filters['global'].value\"></Column>\r\n                    <Column field=\"day\" header=\"日期\" sortable filterBy=\"day\" :globalFilter=\"filters['global'].value\"></Column>\r\n                    <Column field=\"time_start\" header=\"开始时间\" filterBy=\"time_start\" :globalFilter=\"filters['global'].value\">\r\n                        <template #body=\"slotProps\">\r\n                            {{ removeTAndBefore(slotProps.data.time_start) }}\r\n                        </template>\r\n                    </Column>\r\n                    <Column field=\"time_end\" header=\"结束时间\" filterBy=\"time_end\" :globalFilter=\"filters['global'].value\">\r\n                        <template #body=\"slotProps\">\r\n                            {{ removeTAndBefore(slotProps.data.time_end) }}\r\n                        </template>\r\n                    </Column>\r\n                    <Column field=\"orderStatus\" header=\"预约状态\" filterBy=\"orderStatus\" :globalFilter=\"filters['global'].value\">\r\n                        <template #body=\"slotProps\">\r\n                            <Tag :value=\"getStatusValue(slotProps.data.orderStatus)\" :severity=\"getSeverity(slotProps.data.orderStatus)\" />\r\n                        </template>\r\n                    </Column>\r\n                    <Column header=\"取消预约\">\r\n                        <template #body=\"data\">\r\n                            <input v-if=\"data.data.orderStatus === 3\" type=\"button\" v-tooltip=\"'点击取消该预约'\" value=\"取消预约\" @click=\"deleteAppointment(data.data.orderId)\" style=\"background-color:rgb(245, 190, 12);\">\r\n                            <input v-else type=\"button\" value=\"无法取消\" style=\"background-color: red;\">\r\n                        </template>\r\n                    </Column>       \r\n                </div>\r\n            </DataTable>\r\n        </div>\r\n        <!-- 这里写网页主要内容 -->\r\n            \r\n        <div class=\"tips\">\r\n            <Tag value=\"医生手动确认后就诊即完成\" severity=\"success\"></Tag>\r\n            <Tag value=\"请及时完成您的就诊\" severity=\"warning\"></Tag>\r\n            <Tag value=\"每月失约两次以上会被限制\" severity=\"danger\"></Tag>\r\n        </div> \r\n            \r\n      </div>\r\n      <div class=\"footer\">\r\n        <div class=\"footer_box\">\r\n          <ul class=\"footer_list_box\">\r\n            <li>\r\n              <img src=\"https://spoc.buaa.edu.cn/spocResourcebase//rdFileBase/images/af_1.png\" alt=\"\" />\r\n              <span>电话：010-82317114</span>\r\n            </li>\r\n            <li>\r\n              <img src=\"https://spoc.buaa.edu.cn/spocResourcebase//rdFileBase/images/af_2.png\" alt=\"\" />\r\n              <span>传真：010-82328136</span>\r\n            </li>\r\n            <li>\r\n              <img src=\"https://spoc.buaa.edu.cn/spocResourcebase//rdFileBase/images/af_3.png\" alt=\"\" />\r\n              <span>邮编：100191</span>\r\n            </li>\r\n            <li>\r\n              <img src=\"https://spoc.buaa.edu.cn/spocResourcebase//rdFileBase/images/af_4.png\" alt=\"\" />\r\n              <span>地址：北京市海淀区学院路37号</span>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <!-- <img src=\"./logo.png\" alt=\"\" class=\"footer_img\"> -->\r\n        <div class=\"footer_item\">Copyright ©️ 2023-2033</div>\r\n        <div class=\"footer_item\">HMS Powered by SEGroup11</div>\r\n        <div class=\"footer_item\">HMS Designed by AlpaCa</div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import axios from 'axios';\r\n  \r\n  export default {\r\n      name:'CheckMyAppointment',\r\n      data() {\r\n          return {\r\n                appointments: [],\r\n                filters: {\r\n                    global: { value: \"\" }\r\n                },\r\n          }\r\n      },\r\n      methods: {\r\n          removeTAndBefore(str) {\r\n              const index = str.indexOf('T');\r\n              return str.substring(index + 1);\r\n          },\r\n          deleteAppointment(orderId) {\r\n              axios.delete(`http://121.199.161.134:8080/deleteAppointment`,{\r\n                  params:{\r\n                      token:\"eyJhbGciOiJIUzI1NiJ9.eyJub3dMb2dnZWRJblR5cGUiOiJub3dMb2dnZWRJblR5cGVQYXRpZW50Iiwibm93TG9nZ2VkSW5JZCI6IlAwMDAwMDAwMDAwMCIsImlhdCI6MTY4NDc0NTUxOCwiZXhwIjoxNjg2NTQ1NTE4fQ.5dh7XJTkDsaVpHrsTBw4YGs8lnKdY1GRnNCgbJZLtC0\",\r\n                      orderId:orderId\r\n                  }\r\n              })\r\n              .then(response => {\r\n                  console.log(response);\r\n                  if(response.data.code == 0)\r\n                  {\r\n                      alert(response.data.msg+\"，取消失败\");\r\n                  }else{\r\n                      alert(\"成功取消预约\");\r\n                      this.getPatientAppointment();\r\n                  }       \r\n              })\r\n              .catch(error => {\r\n                  console.error(error);\r\n              })\r\n          },\r\n          getPatientAppointment(){\r\n              axios.get('http://121.199.161.134:8080/getPatientAppointment',{\r\n                  params:{\r\n                      token: \"eyJhbGciOiJIUzI1NiJ9.eyJub3dMb2dnZWRJblR5cGUiOiJub3dMb2dnZWRJblR5cGVQYXRpZW50Iiwibm93TG9nZ2VkSW5JZCI6IlAwMDAwMDAwMDAwMCIsImlhdCI6MTY4NDc0NTUxOCwiZXhwIjoxNjg2NTQ1NTE4fQ.5dh7XJTkDsaVpHrsTBw4YGs8lnKdY1GRnNCgbJZLtC0\"\r\n                  }\r\n              })\r\n              .then(response => {\r\n                  this.appointments = response.data.data;\r\n              })\r\n              .catch(error => {\r\n                  console.log(error);\r\n              });\r\n          },\r\n          getSeverity(orderStatus){\r\n            if (orderStatus === 1) {\r\n                return \"success\";\r\n            } else if (orderStatus === 2) {\r\n                return \"danger\";\r\n            } else if (orderStatus === 3) {\r\n                return \"warning\";\r\n            } else {\r\n                return \"\";\r\n            }\r\n          },\r\n          getStatusValue(orderStatus) {\r\n            if (orderStatus === 1) {\r\n                return \"已完成\";\r\n            } else if (orderStatus === 2) {\r\n                return \"已失约\";\r\n            } else if (orderStatus === 3) {\r\n                return \"待就诊\";\r\n            } else {\r\n                return \"\";\r\n            }\r\n        },\r\n          showList() {\r\n            var list = this.$refs.headerList;\r\n            list.style.display = \"block\";\r\n          },\r\n          unShowList() {\r\n            var list = this.$refs.headerList;\r\n            list.style.display = \"none\";\r\n          },\r\n      },\r\n      mounted() {\r\n            this.getPatientAppointment();\r\n      }\r\n  }\r\n  \r\n  </script>\r\n  \r\n  \r\n  \r\n  <style scoped>\r\n  * {\r\n      margin: 0;\r\n      padding: 0;\r\n  }\r\n  html {\r\n      height: 100%;\r\n  }\r\n  body {\r\n      height: 100%;\r\n  }\r\n  .container {\r\n      height: 100%;\r\n      padding-top: 0.1px;\r\n      /*background-image: linear-gradient(to right, #fbc2eb, #a6c1ee);*/\r\n      /*background-image: url(\"../img/back_img3.jpg\");*/\r\n      /*background-size: cover;*/\r\n  }\r\n  .background{\r\n      width: 100%;\r\n      height: 100%;\r\n      background-size: cover;\r\n      position: fixed;\r\n      z-index: -999;\r\n  }\r\n  .header{\r\n    height: 80px;\r\n    width: 100%;\r\n    /*background-color: whitesmoke;*/\r\n    /* background-color: #ECEBEB; */\r\n    border-bottom: rgba(0, 0, 0, 0.3) solid 1px;\r\n    /* background-color: rgba(0, 0, 0, 0.5); */\r\n    /*position: fixed;*/\r\n    z-index: 10;\r\n    position:relative;\r\n}\r\n.header_img{\r\n    /* background-color: red; */\r\n    width: 60px;\r\n    height: 60px;\r\n    float: left;\r\n    margin-left: 8%;\r\n}\r\n.header_tag{\r\n    /* background-color: blue; */\r\n    margin-left: 1%;\r\n    line-height: 60px;\r\n    font-family: Arial;\r\n    float: left;\r\n    font-size: 18px;\r\n}\r\n.header_user{\r\n    /* background-color: green; */\r\n    float: right;\r\n    margin-right: 8%;\r\n    height: 60px;\r\n    width: 150px;\r\n}\r\n#header_list{\r\n    background-color: #c0c0c1;\r\n    display: none;\r\n    margin-top: 60px;\r\n    width: 150px;\r\n    height: 200px;\r\n}\r\n.header_list_item{\r\n    width: 150px;\r\n    height: 50px;\r\n    line-height: 50px;\r\n    text-align: center;\r\n}\r\n.header_list_item:hover{\r\n    background-color: rgb(137, 132, 132);\r\n    cursor: pointer;\r\n}\r\n.header_user:hover{\r\n    background-color: #c1c0c0;\r\n    /* cursor: pointer; */\r\n}\r\n.header_user_word{\r\n    /* background-color: white; */\r\n    margin-left: 10px;\r\n    line-height: 60px;\r\n    font-size: 13px;\r\n    float: left;\r\n}\r\n.header_user_img{\r\n    /* background-color: blue; */\r\n    margin-top: 5px;\r\n    margin-left: 5px;\r\n    width: 50px;\r\n    height: 50px;\r\n    float: left;\r\n    border-radius: 100%;\r\n}\r\n#triangle-down{\r\n    float: left;\r\n    margin-top: 25px;\r\n    margin-left: 5px;\r\n    width:0px;\r\n    height:0px;\r\n    border-left:6px solid transparent;\r\n    border-right:6px solid transparent;\r\n    border-top:10px black solid;\r\n}\r\n  .main{\r\n      border-radius: 5px;\r\n      margin-left: 15%;\r\n      margin-right: 15%;\r\n      margin-top: 70px;\r\n      width: 70%;\r\n      min-height: 600px;\r\n      /* background-color: rgba(255, 255, 255, 0.6); */\r\n  }\r\n  .footer{\r\n      height: 220px;\r\n      width: 100%;\r\n      margin-top: 20px;\r\n      background-color: rgba(0, 0, 0, 0.85);\r\n  }\r\n  .footer_img{\r\n      margin: auto;\r\n      width: 400px;\r\n  }\r\n  .footer_item{\r\n      width: 100%;\r\n      text-align: center;\r\n      color: rgba(255,255,255,0.7);\r\n      font-size: 15px;\r\n      line-height: 25px;\r\n  }\r\n  .footer_box{\r\n      padding-top: 10px;\r\n      margin-top: 20px;\r\n      margin: auto;\r\n      width: 100%;\r\n      height: 120px;\r\n  }\r\n  .footer_list_box{\r\n      margin: auto;\r\n      list-style: none;\r\n      width: 620px;\r\n      height: 100%;\r\n      /* float: left; */\r\n  }\r\n  .footer_list_box>li {\r\n      padding: 15px 0 10px;\r\n      width: 310px;\r\n      height: 50px;\r\n      color: rgba(255,255,255,0.7);\r\n      box-sizing: border-box;\r\n      float: left;\r\n      position: relative;\r\n  }\r\n.search-container {\r\n  position: absolute;\r\n  top: 0px;\r\n  left: 400px;\r\n  margin: 10px;\r\n}\r\n.search-container{\r\n    position: relative;\r\n}\r\n.tips {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    margin-top: 20px;\r\n}\r\n\r\n.tips Tag {\r\n  flex: 1;\r\n  margin-right: 10px;\r\n}\r\n.globalMenu{\r\n    position: relative;\r\n    width:300px;\r\n    height: 40px;\r\n    margin-bottom: 0px;\r\n    margin-left: 10px;\r\n    text-align: left;\r\n}\r\n\r\n  </style>"],"mappings":"AAiHE,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACXC,IAAI,EAAC,oBAAoB;EACzBC,IAAIA,CAAA,EAAG;IACH,OAAO;MACDC,YAAY,EAAE,EAAE;MAChBC,OAAO,EAAE;QACLC,MAAM,EAAE;UAAEC,KAAK,EAAE;QAAG;MACxB;IACN;EACJ,CAAC;EACDC,OAAO,EAAE;IACLC,gBAAgBA,CAACC,GAAG,EAAE;MAClB,MAAMC,KAAI,GAAID,GAAG,CAACE,OAAO,CAAC,GAAG,CAAC;MAC9B,OAAOF,GAAG,CAACG,SAAS,CAACF,KAAI,GAAI,CAAC,CAAC;IACnC,CAAC;IACDG,iBAAiBA,CAACC,OAAO,EAAE;MACvBd,KAAK,CAACe,MAAM,CAAE,+CAA8C,EAAC;QACzDC,MAAM,EAAC;UACHC,KAAK,EAAC,qNAAqN;UAC3NH,OAAO,EAACA;QACZ;MACJ,CAAC,EACAI,IAAI,CAACC,QAAO,IAAK;QACdC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;QACrB,IAAGA,QAAQ,CAACjB,IAAI,CAACoB,IAAG,IAAK,CAAC,EAC1B;UACIC,KAAK,CAACJ,QAAQ,CAACjB,IAAI,CAACsB,GAAG,GAAC,OAAO,CAAC;QACpC,CAAC,MAAI;UACDD,KAAK,CAAC,QAAQ,CAAC;UACf,IAAI,CAACE,qBAAqB,EAAE;QAChC;MACJ,CAAC,EACAC,KAAK,CAACC,KAAI,IAAK;QACZP,OAAO,CAACO,KAAK,CAACA,KAAK,CAAC;MACxB,CAAC;IACL,CAAC;IACDF,qBAAqBA,CAAA,EAAE;MACnBzB,KAAK,CAAC4B,GAAG,CAAC,mDAAmD,EAAC;QAC1DZ,MAAM,EAAC;UACHC,KAAK,EAAE;QACX;MACJ,CAAC,EACAC,IAAI,CAACC,QAAO,IAAK;QACd,IAAI,CAAChB,YAAW,GAAIgB,QAAQ,CAACjB,IAAI,CAACA,IAAI;MAC1C,CAAC,EACAwB,KAAK,CAACC,KAAI,IAAK;QACZP,OAAO,CAACC,GAAG,CAACM,KAAK,CAAC;MACtB,CAAC,CAAC;IACN,CAAC;IACDE,WAAWA,CAACC,WAAW,EAAC;MACtB,IAAIA,WAAU,KAAM,CAAC,EAAE;QACnB,OAAO,SAAS;MACpB,OAAO,IAAIA,WAAU,KAAM,CAAC,EAAE;QAC1B,OAAO,QAAQ;MACnB,OAAO,IAAIA,WAAU,KAAM,CAAC,EAAE;QAC1B,OAAO,SAAS;MACpB,OAAO;QACH,OAAO,EAAE;MACb;IACF,CAAC;IACDC,cAAcA,CAACD,WAAW,EAAE;MAC1B,IAAIA,WAAU,KAAM,CAAC,EAAE;QACnB,OAAO,KAAK;MAChB,OAAO,IAAIA,WAAU,KAAM,CAAC,EAAE;QAC1B,OAAO,KAAK;MAChB,OAAO,IAAIA,WAAU,KAAM,CAAC,EAAE;QAC1B,OAAO,KAAK;MAChB,OAAO;QACH,OAAO,EAAE;MACb;IACJ,CAAC;IACCE,QAAQA,CAAA,EAAG;MACT,IAAIC,IAAG,GAAI,IAAI,CAACC,KAAK,CAACC,UAAU;MAChCF,IAAI,CAACG,KAAK,CAACC,OAAM,GAAI,OAAO;IAC9B,CAAC;IACDC,UAAUA,CAAA,EAAG;MACX,IAAIL,IAAG,GAAI,IAAI,CAACC,KAAK,CAACC,UAAU;MAChCF,IAAI,CAACG,KAAK,CAACC,OAAM,GAAI,MAAM;IAC7B;EACJ,CAAC;EACDE,OAAOA,CAAA,EAAG;IACJ,IAAI,CAACd,qBAAqB,EAAE;EAClC;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}