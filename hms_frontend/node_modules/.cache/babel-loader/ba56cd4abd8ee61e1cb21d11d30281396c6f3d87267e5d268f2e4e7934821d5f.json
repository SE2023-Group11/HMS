{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createVNode as _createVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, withModifiers as _withModifiers, createBlock as _createBlock, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '../Pic/OIP.jpg';\nconst _withScopeId = n => (_pushScopeId(\"data-v-3155ac83\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"Pic\"\n}, [/*#__PURE__*/_createCommentVNode(\" <img src=\\\"../Pic/yiyuan.jpg\\\" v-if=\\\"!imageUrl\\\" /> \")], -1 /* HOISTED */));\nconst _hoisted_2 = {\n  class: \"Pic1\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  src: _imports_0\n};\nconst _hoisted_4 = {\n  class: \"login\"\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"医院信息管理系统\", -1 /* HOISTED */));\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"用户登录\", -1 /* HOISTED */));\nconst _hoisted_7 = {\n  class: \"form-group\"\n};\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"uid\"\n}, \"用户id\", -1 /* HOISTED */));\nconst _hoisted_9 = {\n  class: \"form-group\"\n};\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"password\"\n}, \"密码\", -1 /* HOISTED */));\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_13 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_14 = {\n  class: \"tongzhi\"\n};\nconst _hoisted_15 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"xia\"\n}, [/*#__PURE__*/_createElementVNode(\"pre\", null, [/*#__PURE__*/_createTextVNode(\"\\n\\n        版权所有 2014-2022 北京航空航天大学\\n        京ICP备05004617-3文保网安备案号1101080018\\n        \"), /*#__PURE__*/_createElementVNode(\"br\"), /*#__PURE__*/_createTextVNode(\"\\n        地址：北京市海淀区学院路37号\\n        邮编：100191\\n        电话：82317114\\n        \")])], -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_hoisted_1, _createElementVNode(\"div\", _hoisted_2, [!_ctx.imageUrl ? (_openBlock(), _createElementBlock(\"img\", _hoisted_3)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _hoisted_6, _createElementVNode(\"form\", {\n    onSubmit: _cache[3] || (_cache[3] = _withModifiers((...args) => _ctx.submitForm && _ctx.submitForm(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _createVNode($setup[\"InputText\"], {\n    placeholder: '请输入您的id号或身份证号',\n    type: \"text\",\n    id: \"uid\",\n    modelValue: $setup.uid,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.uid = $event),\n    class: \"inp\"\n  }, null, 8 /* PROPS */, [\"modelValue\"])]), _createElementVNode(\"div\", _hoisted_9, [_hoisted_10, _createVNode($setup[\"Password\"], {\n    placeholder: '请输入您的密码',\n    id: \"password\",\n    modelValue: $setup.password,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.password = $event),\n    style: {\n      \"width\": \"400px\",\n      \"height\": \"40px\"\n    }\n  }, null, 8 /* PROPS */, [\"modelValue\"])]), _hoisted_11, _createVNode($setup[\"SelectButton\"], {\n    modelValue: $setup.is_patient,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.is_patient = $event),\n    options: $setup.options,\n    \"aria-labelledby\": \"basic\"\n  }, null, 8 /* PROPS */, [\"modelValue\", \"options\"]), _hoisted_12, _createElementVNode(\"div\", null, [_createTextVNode(\"            \"), _createVNode(_component_router_link, {\n    to: \"/register\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"用户注册\")]),\n    _: 1 /* STABLE */\n  }), _createTextVNode(\"      \"), _createVNode(_component_router_link, {\n    to: \"/ForgetPwd\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"忘记密码\")]),\n    _: 1 /* STABLE */\n  })]), _hoisted_13, _createVNode($setup[\"Button\"], {\n    class: \"bttt\",\n    label: \"登录\",\n    onClick: $setup.loginbt\n  })], 32 /* HYDRATE_EVENTS */)]), _createCommentVNode(\" 消息的通知 \"), _createElementVNode(\"div\", _hoisted_14, [_createCommentVNode(\" 用户登录 \"), _ctx.judlog == 1 ? (_openBlock(), _createBlock($setup[\"Message\"], {\n    key: 0,\n    \"z-index\": \"9999999999999\",\n    severity: \"success\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"登录成功！\")]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), _ctx.judlog == -1 ? (_openBlock(), _createBlock($setup[\"Message\"], {\n    key: 1,\n    \"z-index\": \"9999999999999\",\n    severity: \"error\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"登录失败\")]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true)]), _hoisted_15], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_imports_0","_createElementVNode","class","_createCommentVNode","src","for","_hoisted_1","_hoisted_2","_ctx","imageUrl","_createElementBlock","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","onSubmit","_cache","_withModifiers","args","submitForm","_hoisted_7","_hoisted_8","_createVNode","$setup","placeholder","type","id","uid","$event","_hoisted_9","_hoisted_10","password","style","_hoisted_11","is_patient","options","_hoisted_12","_component_router_link","to","_hoisted_13","label","onClick","loginbt","_hoisted_14","judlog","_createBlock","severity","_hoisted_15"],"sources":["D:\\大二下\\软件工程\\Clone\\HMS-front-end\\hms_frontend\\src\\views\\LoginForm.vue"],"sourcesContent":["<template>\r\n    <div class=\"Pic\">\r\n        <!-- <img src=\"../Pic/yiyuan.jpg\" v-if=\"!imageUrl\" /> -->\r\n    </div>\r\n    <div class=\"Pic1\">\r\n        <img src=\"../Pic/OIP.jpg\" v-if=\"!imageUrl\" />\r\n    </div>\r\n    <div class=\"login\">\r\n\r\n        <h1>医院信息管理系统</h1>\r\n        <h2>用户登录</h2>\r\n        <form @submit.prevent=\"submitForm\">\r\n            <div class=\"form-group\">\r\n                <label for=\"uid\">用户id</label>\r\n                <InputText :placeholder=\"'请输入您的id号或身份证号'\" type=\"text\" id=\"uid\" v-model=\"uid\" class=\"inp\"/>\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n                <label for=\"password\">密码</label>\r\n                <Password :placeholder=\"'请输入您的密码'\" id=\"password\" v-model=\"password\" style=\"width: 400px; height: 40px\" />\r\n            </div>\r\n            <br>\r\n            <SelectButton v-model=\"is_patient\" :options=\"options\" aria-labelledby=\"basic\" />\r\n            <br>\r\n            <div>\r\n                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n                <router-link to=\"/register\">用户注册</router-link>\r\n                &nbsp;&nbsp;&nbsp;&nbsp;\r\n                <router-link to=\"/ForgetPwd\">忘记密码</router-link>\r\n            </div>\r\n            <br>\r\n            <Button class=\"bttt\" label=\"登录\" @click=\"loginbt\" />\r\n        </form>\r\n    </div>\r\n    <!-- 消息的通知 -->\r\n    <div class=\"tongzhi\">\r\n        <!-- 用户登录 -->\r\n        <Message z-index=9999999999999 v-if=\"judlog == 1\" severity=\"success\">登录成功！</Message>\r\n        <Message z-index=9999999999999 v-if=\"judlog == -1\" severity=\"error\">登录失败</Message>\r\n    </div>\r\n\r\n    <div class=\"xia\">\r\n        \r\n        <pre>\r\n\r\n\r\n        版权所有 2014-2022 北京航空航天大学\r\n        京ICP备05004617-3文保网安备案号1101080018\r\n        <br>\r\n        地址：北京市海淀区学院路37号\r\n        邮编：100191\r\n        电话：82317114\r\n        </pre>\r\n    </div>\r\n</template>\r\n  \r\n<script setup>\r\nimport { ref } from 'vue';\r\nimport axios from 'axios'\r\n//primevue\r\nimport InputText from 'primevue/inputtext';\r\nimport Button from 'primevue/button';\r\nimport Password from 'primevue/password';\r\nimport SelectButton from 'primevue/selectbutton';\r\nimport Message from 'primevue/message';\r\nimport { useRouter } from 'vue-router'\r\n\r\nconst router = useRouter()\r\nconst uid = ref('P00000000000');\r\nconst password = ref('newpassword');\r\nconst options = ref(['患者身份进入', '非患者身份进入']);\r\nconst is_patient = ref('off');\r\nconst role = ref('patient')//判断是不是患者\r\n//用于判断登录是否成功的变量\r\nconst juglog = ref(0);\r\nfunction loginbt() {\r\n    //首先判断是不是患者\r\n    if (is_patient.value === '患者身份进入') role.value = 'patient';\r\n    else role.value = 'doctor';\r\n    console.log(role.value);\r\n    if (role.value == 'patient') {\r\n        axios.post('http://121.199.161.134:8080/loginPatient',null, {\r\n            params: {\r\n                uid: uid.value,\r\n                password: password.value,\r\n            }}\r\n        )\r\n            .then(response => {\r\n                console.log(response.data.code);\r\n                //传送成功的情况下，判断信息是否正确\r\n                const jud =response.data.code;\r\n                console.log(response.data.data);\r\n                if(jud == 1){\r\n                    console.log(response.data);\r\n                    sessionStorage.setItem('token', response.data.data);\r\n                    sessionStorage.setItem('role', role.value);//y是患者，n是医生\r\n                    juglog.value = 1;\r\n                    window.location.href=\"/patientRoot\";\r\n                }\r\n                //将将返回的token存到session中\r\n                else if(jud == 2){\r\n\r\n                    sessionStorage.setItem('token', response.data.data);\r\n                    sessionStorage.setItem('role', role.value);//y是患者，n是医生\r\n                    juglog.value = 1;\r\n                    window.location.href=\"/managerEnter\";\r\n                }\r\n                else{\r\n                    console.log('登录失败');\r\n                    juglog.value = -1;\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.error(error)\r\n                judlog.value = -1;\r\n            })\r\n    }\r\n    if (role.value == 'doctor') {\r\n        axios.post('http://121.199.161.134:8080/loginDoctor',null,{params: {\r\n                uid: uid.value,\r\n                password: password.value,\r\n            }}\r\n        )\r\n            .then(response => {\r\n                console.log(response.data.code);\r\n                //传送成功的情况下，判断信息是否正确\r\n                const jud =response.data.code;\r\n                console.log(typeof(jud));\r\n                if(jud == 1){\r\n                    sessionStorage.setItem('token', response.data.data);\r\n                    sessionStorage.setItem('role', role.value);//y是患者，n是医生\r\n                    juglog.value = 1;\r\n                    window.location.href=\"/doctorRoot\";\r\n                }\r\n                //将将返回的token存到session中\r\n                else if(jud == 2){\r\n                    sessionStorage.setItem('token', response.data.data);\r\n                    sessionStorage.setItem('role', role.value);//y是患者，n是医生\r\n                    juglog.value = 1;\r\n                    console.log(sessionStorage.getItem('token'));\r\n                    window.location.href=\"/defaultView\";\r\n                }\r\n                else{\r\n                    console.log('登录失败');\r\n                    juglog.value = -1;\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.error(error)\r\n                judlog.value = -1;\r\n            })\r\n    }\r\n\r\n}\r\n\r\n</script>\r\n  \r\n<style scoped>\r\n.Pic1 img {\r\n    position: absolute;\r\n    width: 100px;\r\n    top:0px;\r\n    right: 285px;\r\n}\r\n\r\n.Pic {\r\n    position: absolute;\r\n    background-image: url(\"../Pic/yiyuan.jpg\");\r\n    background-size: cover;\r\n    top: 0px;\r\n    width: 74%;\r\n    height: 100%;\r\n}\r\n.inp{\r\n    width: 200px;\r\n}\r\n.l1 {\r\n    position: absolute;\r\n    top: 10px;\r\n    right: 0;\r\n}\r\n\r\n.bttt {\r\n    position: relative;\r\n    width: 200px;\r\n    left: 35px;\r\n}\r\n\r\n.Pic img {\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: cover;\r\n}\r\n\r\n.login {\r\n    position: absolute;\r\n    left: 75%;\r\n    top: 90px;\r\n    width: 350px;\r\n    margin: 0 auto;\r\n    padding: 20px;\r\n    /* border: 1px solid #ccc;\r\n    border-radius: 5px; */\r\n}\r\n\r\n.form-group {\r\n    display: flex;\r\n    flex-direction: column;\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.tongzhi {\r\n    position: absolute;\r\n    left: 600px;\r\n    width: 400px;\r\n    top: 20px;\r\n    z-index: 999999999999999999999999;\r\n}\r\n\r\nlabel {\r\n    font-weight: bold;\r\n    margin-bottom: 5px;\r\n}\r\n\r\n.xia {\r\n    position: absolute;\r\n    bottom: 0;\r\n    font: 5px;\r\n    left: 1140px;\r\n    width: 300px;\r\n    \r\n}\r\n\r\ninput[type='uid'],\r\ninput[type='password'],\r\ninput[type='text'] {\r\n    padding: 10px;\r\n    border-radius: 3px;\r\n    border: 1px solid #ccc;\r\n}\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}