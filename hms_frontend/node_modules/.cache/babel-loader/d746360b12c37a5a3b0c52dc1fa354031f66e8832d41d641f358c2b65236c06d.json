{"ast":null,"code":"import DemoBottom from '../components/DemoBottom.vue';\nimport DemoTitle from '../components/DemoTitle.vue';\nimport axios from 'axios';\nexport default {\n  name: 'CheckMyAppointment',\n  components: {\n    DemoBottom,\n    DemoTitle\n  },\n  data() {\n    return {\n      appointments: []\n    };\n  },\n  methods: {\n    removeTAndBefore(str) {\n      const index = str.indexOf('T');\n      return str.substring(index + 1);\n    },\n    deleteAppointment(orderId) {\n      axios.delete(`http://121.199.161.134:8080/deleteAppointment`, {\n        params: {\n          token: \"eyJhbGciOiJIUzI1NiJ9.eyJub3dMb2dnZWRJblR5cGUiOiJub3dMb2dnZWRJblR5cGVQYXRpZW50Iiwibm93TG9nZ2VkSW5JZCI6IlAwMDAwMDAwMDAwMCIsImlhdCI6MTY4NDc0NTUxOCwiZXhwIjoxNjg2NTQ1NTE4fQ.5dh7XJTkDsaVpHrsTBw4YGs8lnKdY1GRnNCgbJZLtC0\",\n          orderId: orderId\n        }\n      }).then(response => {\n        console.log(response);\n        if (response.data.code == 0) {\n          alert(response.data.msg + \"，取消失败\");\n        } else {\n          alert(\"成功取消预约\");\n          this.getPatientAppointment();\n        }\n      }).catch(error => {\n        console.error(error);\n      });\n    },\n    getPatientAppointment() {\n      axios.get('http://121.199.161.134:8080/getPatientAppointment', {\n        params: {\n          token: \"eyJhbGciOiJIUzI1NiJ9.eyJub3dMb2dnZWRJblR5cGUiOiJub3dMb2dnZWRJblR5cGVQYXRpZW50Iiwibm93TG9nZ2VkSW5JZCI6IlAwMDAwMDAwMDAwMCIsImlhdCI6MTY4NDc0NTUxOCwiZXhwIjoxNjg2NTQ1NTE4fQ.5dh7XJTkDsaVpHrsTBw4YGs8lnKdY1GRnNCgbJZLtC0\"\n        }\n      }).then(response => {\n        this.appointments = response.data.data;\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n  },\n  mounted() {\n    this.getPatientAppointment();\n  }\n};","map":{"version":3,"names":["DemoBottom","DemoTitle","axios","name","components","data","appointments","methods","removeTAndBefore","str","index","indexOf","substring","deleteAppointment","orderId","delete","params","token","then","response","console","log","code","alert","msg","getPatientAppointment","catch","error","get","mounted"],"sources":["D:\\Desktop\\HMS-front-end\\hms_frontend\\src\\views\\CheckMyAppointment.vue"],"sourcesContent":["<template>\r\n    <demo-title/>\r\n\r\n    <div id=\"app\">\r\n        <DataTable :value=\"appointments\">\r\n            <Column field=\"orderId\" header=\"预约id\" sortable></Column>\r\n            <Column field=\"patientId\" header=\"患者id\" sortable></Column>\r\n            <Column field=\"doctorId\" header=\"医生id\" sortable></Column>\r\n            <Column field=\"day\" header=\"日期\" sortable></Column>\r\n            <Column field=\"time_start\" header=\"开始时间\">\r\n                <template #body=\"slotProps\">\r\n                    {{ removeTAndBefore(slotProps.data.time_start) }}\r\n                </template>\r\n            </Column>\r\n            <Column field=\"time_end\" header=\"结束时间\">\r\n                <template #body=\"slotProps\">\r\n                    {{ removeTAndBefore(slotProps.data.time_end) }}\r\n                </template>\r\n            </Column>\r\n            <Column field=\"orderStatus\" header=\"预约状态\"></Column>\r\n            <Column header=\"取消预约\">\r\n                <template #body=\"data\">\r\n                    <input v-if=\"data.data.orderStatus === 3\" type=\"button\" value=\"取消预约\" @click=\"deleteAppointment(data.data.orderId)\">\r\n                    <input v-else type=\"text\" value=\"无法取消\">\r\n                </template>\r\n            </Column>\r\n        </DataTable>\r\n        </div>\r\n    <demo-bottom/>\r\n</template>\r\n\r\n<script>\r\nimport DemoBottom from '../components/DemoBottom.vue';\r\nimport DemoTitle from '../components/DemoTitle.vue';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n    name:'CheckMyAppointment',\r\n    components: { \r\n        DemoBottom,\r\n        DemoTitle \r\n    },\r\n    data() {\r\n        return {\r\n            appointments: []\r\n        }\r\n    },\r\n    methods: {\r\n        removeTAndBefore(str) {\r\n            const index = str.indexOf('T');\r\n            return str.substring(index + 1);\r\n        },\r\n        deleteAppointment(orderId) {\r\n            axios.delete(`http://121.199.161.134:8080/deleteAppointment`,{\r\n                params:{\r\n                    token:\"eyJhbGciOiJIUzI1NiJ9.eyJub3dMb2dnZWRJblR5cGUiOiJub3dMb2dnZWRJblR5cGVQYXRpZW50Iiwibm93TG9nZ2VkSW5JZCI6IlAwMDAwMDAwMDAwMCIsImlhdCI6MTY4NDc0NTUxOCwiZXhwIjoxNjg2NTQ1NTE4fQ.5dh7XJTkDsaVpHrsTBw4YGs8lnKdY1GRnNCgbJZLtC0\",\r\n                    orderId:orderId\r\n                }\r\n            })\r\n            .then(response => {\r\n                console.log(response);\r\n                if(response.data.code == 0)\r\n                {\r\n                    alert(response.data.msg+\"，取消失败\");\r\n                }else{\r\n                    alert(\"成功取消预约\");\r\n                    this.getPatientAppointment();\r\n                }       \r\n            })\r\n            .catch(error => {\r\n                console.error(error);\r\n            })\r\n        },\r\n        getPatientAppointment(){\r\n            axios.get('http://121.199.161.134:8080/getPatientAppointment',{\r\n                params:{\r\n                    token: \"eyJhbGciOiJIUzI1NiJ9.eyJub3dMb2dnZWRJblR5cGUiOiJub3dMb2dnZWRJblR5cGVQYXRpZW50Iiwibm93TG9nZ2VkSW5JZCI6IlAwMDAwMDAwMDAwMCIsImlhdCI6MTY4NDc0NTUxOCwiZXhwIjoxNjg2NTQ1NTE4fQ.5dh7XJTkDsaVpHrsTBw4YGs8lnKdY1GRnNCgbJZLtC0\"\r\n                }\r\n            })\r\n            .then(response => {\r\n                this.appointments = response.data.data;\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n            });\r\n        }\r\n    },\r\n    mounted() {\r\n        this.getPatientAppointment();\r\n    }\r\n}\r\n\r\n\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"mappings":"AAgCA,OAAOA,UAAS,MAAO,8BAA8B;AACrD,OAAOC,SAAQ,MAAO,6BAA6B;AACnD,OAAOC,KAAI,MAAO,OAAO;AAEzB,eAAe;EACXC,IAAI,EAAC,oBAAoB;EACzBC,UAAU,EAAE;IACRJ,UAAU;IACVC;EACJ,CAAC;EACDI,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,YAAY,EAAE;IAClB;EACJ,CAAC;EACDC,OAAO,EAAE;IACLC,gBAAgBA,CAACC,GAAG,EAAE;MAClB,MAAMC,KAAI,GAAID,GAAG,CAACE,OAAO,CAAC,GAAG,CAAC;MAC9B,OAAOF,GAAG,CAACG,SAAS,CAACF,KAAI,GAAI,CAAC,CAAC;IACnC,CAAC;IACDG,iBAAiBA,CAACC,OAAO,EAAE;MACvBZ,KAAK,CAACa,MAAM,CAAE,+CAA8C,EAAC;QACzDC,MAAM,EAAC;UACHC,KAAK,EAAC,qNAAqN;UAC3NH,OAAO,EAACA;QACZ;MACJ,CAAC,EACAI,IAAI,CAACC,QAAO,IAAK;QACdC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;QACrB,IAAGA,QAAQ,CAACd,IAAI,CAACiB,IAAG,IAAK,CAAC,EAC1B;UACIC,KAAK,CAACJ,QAAQ,CAACd,IAAI,CAACmB,GAAG,GAAC,OAAO,CAAC;QACpC,CAAC,MAAI;UACDD,KAAK,CAAC,QAAQ,CAAC;UACf,IAAI,CAACE,qBAAqB,EAAE;QAChC;MACJ,CAAC,EACAC,KAAK,CAACC,KAAI,IAAK;QACZP,OAAO,CAACO,KAAK,CAACA,KAAK,CAAC;MACxB,CAAC;IACL,CAAC;IACDF,qBAAqBA,CAAA,EAAE;MACnBvB,KAAK,CAAC0B,GAAG,CAAC,mDAAmD,EAAC;QAC1DZ,MAAM,EAAC;UACHC,KAAK,EAAE;QACX;MACJ,CAAC,EACAC,IAAI,CAACC,QAAO,IAAK;QACd,IAAI,CAACb,YAAW,GAAIa,QAAQ,CAACd,IAAI,CAACA,IAAI;MAC1C,CAAC,EACAqB,KAAK,CAACC,KAAI,IAAK;QACZP,OAAO,CAACC,GAAG,CAACM,KAAK,CAAC;MACtB,CAAC,CAAC;IACN;EACJ,CAAC;EACDE,OAAOA,CAAA,EAAG;IACN,IAAI,CAACJ,qBAAqB,EAAE;EAChC;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}