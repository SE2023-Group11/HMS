{"ast":null,"code":"import { createVNode as _createVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  style: {\n    \"left\": \"5%\",\n    \"position\": \"relative\"\n  }\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"td\", {\n  style: {\n    \"width\": \"30%\"\n  }\n}, \"上传图片：\", -1 /* HOISTED */);\nconst _hoisted_3 = {\n  style: {\n    \"width\": \"60%\"\n  }\n};\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"td\", null, \"介绍文字：\", -1 /* HOISTED */);\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_10 = {\n  style: {\n    \"position\": \"absolute\",\n    \"top\": \"220px\",\n    \"align-items\": \"center\",\n    \"height\": \"fit-content\",\n    \"max-height\": \"500px\",\n    \"overflow\": \"auto\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode($setup[\"Toast\"]), _createVNode($setup[\"Button\"], {\n    label: \"添加新闻\",\n    onClick: _cache[0] || (_cache[0] = $event => $setup.visible = true),\n    style: {\n      \"position\": \"absolute\",\n      \"margin\": \"20px\",\n      \"left\": \"15%\"\n    }\n  }), _createVNode($setup[\"Dialog\"], {\n    visible: $setup.visible,\n    \"onUpdate:visible\": _cache[3] || (_cache[3] = $event => $setup.visible = $event),\n    header: \"添加新闻\",\n    style: {\n      \"width\": \"60%\",\n      \"position\": \"absolute\"\n    }\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"table\", _hoisted_1, [_createElementVNode(\"tr\", null, [_hoisted_2, _createElementVNode(\"td\", _hoisted_3, [_createElementVNode(\"div\", null, [_createElementVNode(\"div\", null, [_createElementVNode(\"input\", {\n      onChange: _cache[1] || (_cache[1] = $event => $setup.getFiles($event)),\n      name: \"files\",\n      type: \"file\"\n    }, null, 32 /* HYDRATE_EVENTS */), _hoisted_4])])])]), _hoisted_5, _createElementVNode(\"tr\", null, [_hoisted_6, _createElementVNode(\"td\", null, [_createVNode($setup[\"InputText\"], {\n      type: \"text\",\n      modelValue: $setup.introText,\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.introText = $event),\n      style: {\n        \"width\": \"100%\"\n      }\n    }, null, 8 /* PROPS */, [\"modelValue\"])])])]), _hoisted_7, _hoisted_8, _createVNode($setup[\"Button\"], {\n      onClick: $setup.upload,\n      type: \"submit\",\n      style: {\n        \"position\": \"absolute\",\n        \"left\": \"50%\",\n        \"transform\": \"translate(0, -50%)\"\n      }\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"上传\")]),\n      _: 1 /* STABLE */\n    }), _hoisted_9]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"visible\"]), _createVNode($setup[\"Toast\"]), _createVNode($setup[\"ConfirmDialog\"]), _createElementVNode(\"div\", null, [_createVNode($setup[\"Button\"], {\n    onClick: _cache[4] || (_cache[4] = $event => $setup.confirm2()),\n    label: \"删除新闻\",\n    style: {\n      \"position\": \"absolute\",\n      \"margin\": \"20px\",\n      \"left\": \"25%\"\n    }\n  })]), _createElementVNode(\"div\", _hoisted_10, [_createVNode($setup[\"newsListShow\"], {\n    onSelectItems: $setup.getSelectedItems\n  })])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["style","_createElementVNode","_createVNode","$setup","label","onClick","_cache","$event","visible","header","_hoisted_1","_hoisted_2","_hoisted_3","onChange","getFiles","name","type","_hoisted_4","_hoisted_5","_hoisted_6","introText","_hoisted_7","_hoisted_8","upload","_hoisted_9","confirm2","_hoisted_10","onSelectItems","getSelectedItems"],"sources":["D:\\Desktop\\HMS-front-end\\hms_frontend\\src\\manager\\components\\newsManage\\newsShow.vue"],"sourcesContent":["<template>\r\n    <Toast />\r\n    <Button label=\"添加新闻\" @click=\"visible=true\" style=\"position: absolute; margin: 20px; left: 15%;\" />\r\n    <Dialog v-model:visible=\"visible\" header=\"添加新闻\" style=\"width:60%; position: absolute;\">\r\n        <table style=\"left: 5%; position: relative;\">\r\n            <tr>\r\n                <td style=\"width: 30%;\">上传图片：</td>\r\n                <td style=\"width: 60%;\">\r\n                    <div>\r\n                        <div>\r\n                            <input @change=\"getFiles($event)\" name=\"files\" type=\"file\" /><br />\r\n                        </div>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n            <br/>\r\n            <tr>\r\n                <td>介绍文字：</td>\r\n                <td>\r\n                    <InputText type=\"text\" v-model=\"introText\" style=\"width: 100%;\"/>\r\n                </td>\r\n            </tr>\r\n        </table>\r\n        <br/><br/>\r\n        <Button @click=\"upload\" type=\"submit\" style=\"position: absolute; left: 50%; transform: translate(0, -50%);\">上传</Button>\r\n        <br/>\r\n    </Dialog>\r\n    <Toast />\r\n    <ConfirmDialog></ConfirmDialog>\r\n    <div>\r\n        <Button @click=\"confirm2()\" label=\"删除新闻\" style=\"position: absolute; margin: 20px; left: 25%;\"></Button>\r\n    </div>\r\n    <div style=\"position: absolute; top: 220px; align-items: center; height: fit-content; max-height: 500px; overflow: auto;\">\r\n        <newsListShow @select-items=\"getSelectedItems\"/>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport Button from 'primevue/button';\r\nimport Dialog from 'primevue/dialog';\r\nimport { ref } from 'vue';\r\nimport InputText from 'primevue/inputtext';\r\nimport newsListShow from './newsListShow.vue'\r\nimport { useConfirm } from \"primevue/useconfirm\";\r\nimport { useToast } from \"primevue/usetoast\";\r\nimport ConfirmDialog from 'primevue/confirmdialog';\r\nimport Toast from 'primevue/toast';\r\nimport axios from 'axios';\r\n\r\nlet visible = ref(false)\r\nlet introText = ref(\"\")\r\nlet itemsToBeDeleted = ref([])\r\nlet token = \"eyJhbGciOiJIUzI1NiJ9.eyJub3dMb2dnZWRJblR5cGUiOiJub3dMb2dnZWRJblR5cGVBZG1pbiIsIm5vd0xvZ2dlZEluSWQiOiIxIiwiaWF0IjoxNjg0NzQ2OTQxLCJleHAiOjE2ODY1NDY5NDF9.npgDMKJW-7zrsoAlBmdtuWbQNqzhi_0bBzjXieLqKu8\"\r\nlet files = []\r\nlet imageUrl = ref(\"\")\r\nconst confirm = useConfirm();\r\nconst toast = useToast();\r\n\r\nfunction getFiles(event) {\r\n    const file = event.target.files[0];\r\n    \r\n    console.log('bbbbbbbbbbb');\r\n    console.log(file);\r\n    // const formData = new FormData();\r\n    // formData.append(\"name\",token);\r\n    // formData.append(\"file\",file);\r\n    \r\n    //将上传的文件存到数据库\r\n    if (file) {\r\n        axios.post('https://pz.al/api/upload', {image:file}, {\r\n            params:{\r\n\r\n            },\r\n            headers:{\r\n                \"Content-Type\":\"multipart/form-data\"\r\n            }\r\n        }).then(response => {\r\n            console.log(response.data.data.url);\r\n            imageUrl.value = response.data.data.url\r\n        })\r\n    }\r\n    else {\r\n        console.error('文件不存在')\r\n    }\r\n}\r\n\r\nfunction upload()\r\n{\r\n    axios({\r\n        method: 'post',\r\n        url: 'http://121.199.161.134:8080/addNews',\r\n        params: {\r\n            token: token\r\n        },\r\n        data: {\r\n            img: imageUrl.value,\r\n            body: introText.value\r\n        }\r\n    }).then((res)=>{\r\n        console.log(res)\r\n        toast.add({ severity: 'info', summary: '添加新闻', detail: '已将新闻上传至列表！', life: 3000 });\r\n    })\r\n    window.location.reload()\r\n}\r\n\r\nfunction getSelectedItems(params)\r\n{\r\n    console.log(params)\r\n    itemsToBeDeleted = params\r\n}\r\n\r\nconst confirm2 = () => {\r\n    console.log(itemsToBeDeleted)\r\n    if(itemsToBeDeleted.value.length==0)\r\n    {\r\n        window.alert(\"未选择任何新闻！\")\r\n    }\r\n    else\r\n    {\r\n        confirm.require({\r\n            message: '确定删除选中的全部新闻吗？',\r\n            header: '删除新闻',\r\n            acceptClass: 'p-button-danger',\r\n            accept: () => {\r\n                console.log(itemsToBeDeleted.value)\r\n                let array_ = itemsToBeDeleted.value\r\n                let ret = []\r\n                for(let i=0; i<array_.length; i++)\r\n                {\r\n                    ret.push(array_[i].id)\r\n                }\r\n                console.log(ret)\r\n                axios({\r\n                    method: 'delete',\r\n                    url: 'http://121.199.161.134:8080/deleteNews',\r\n                    params: {\r\n                        token: token\r\n                    },\r\n                    data: {\r\n                        id: ret\r\n                    }\r\n                }).then((res)=>{\r\n                    console.log(res)\r\n                })\r\n                window.location.reload()\r\n                toast.add({ severity: 'info', summary: '删除新闻', detail: '已删除全部选中新闻！', life: 3000 });\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\n\r\n</script>"],"mappings":";;EAIeA,KAAqC,EAArC;IAAA;IAAA;EAAA;AAAqC;gCAEpCC,mBAAA,CAAkC;EAA9BD,KAAmB,EAAnB;IAAA;EAAA;AAAmB,GAAC,OAAK;;EACzBA,KAAmB,EAAnB;IAAA;EAAA;AAAmB;gCAGkDC,mBAAA,CAAM;gCAKnFA,mBAAA,CAAK;gCAEDA,mBAAA,CAAc,YAAV,OAAK;gCAMjBA,mBAAA,CAAK;gCAAAA,mBAAA,CAAK;gCAEVA,mBAAA,CAAK;;EAOJD,KAAoH,EAApH;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;EAAA;AAAoH;;6DA/BzHE,YAAA,CAASC,MAAA,YACTD,YAAA,CAAkGC,MAAA;IAA1FC,KAAK,EAAC,MAAM;IAAEC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEJ,MAAA,CAAAK,OAAO;IAAOR,KAAoD,EAApD;MAAA;MAAA;MAAA;IAAA;MAC3CE,YAAA,CAuBSC,MAAA;IAvBOK,OAAO,EAAEL,MAAA,CAAAK,OAAO;4DAAPL,MAAA,CAAAK,OAAO,GAAAD,MAAA;IAAEE,MAAM,EAAC,MAAM;IAACT,KAAsC,EAAtC;MAAA;MAAA;IAAA;;sBAC5C,MAkBQ,CAlBRC,mBAAA,CAkBQ,SAlBRS,UAkBQ,GAjBJT,mBAAA,CASK,aARDU,UAAkC,EAClCV,mBAAA,CAMK,MANLW,UAMK,GALDX,mBAAA,CAIM,cAHFA,mBAAA,CAEM,cADFA,mBAAA,CAA6D;MAArDY,QAAM,EAAAP,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEJ,MAAA,CAAAW,QAAQ,CAACP,MAAM;MAAGQ,IAAI,EAAC,OAAO;MAACC,IAAI,EAAC;uCAASC,UAAM,C,SAKnFC,UAAK,EACLjB,mBAAA,CAKK,aAJDkB,UAAc,EACdlB,mBAAA,CAEK,aADDC,YAAA,CAAiEC,MAAA;MAAtDa,IAAI,EAAC,MAAM;kBAAUb,MAAA,CAAAiB,SAAS;iEAATjB,MAAA,CAAAiB,SAAS,GAAAb,MAAA;MAAEP,KAAoB,EAApB;QAAA;MAAA;mDAIvDqB,UAAK,EAAAC,UAAK,EACVpB,YAAA,CAAuHC,MAAA;MAA9GE,OAAK,EAAEF,MAAA,CAAAoB,MAAM;MAAEP,IAAI,EAAC,QAAQ;MAAChB,KAAqE,EAArE;QAAA;QAAA;QAAA;MAAA;;wBAAsE,MAAE,C,iBAAF,IAAE,E;;QAC9GwB,UAAK,C;;kCAETtB,YAAA,CAASC,MAAA,YACTD,YAAA,CAA+BC,MAAA,oBAC/BF,mBAAA,CAEM,cADFC,YAAA,CAAuGC,MAAA;IAA9FE,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEJ,MAAA,CAAAsB,QAAQ;IAAIrB,KAAK,EAAC,MAAM;IAACJ,KAAoD,EAApD;MAAA;MAAA;MAAA;IAAA;QAE7CC,mBAAA,CAEM,OAFNyB,WAEM,GADFxB,YAAA,CAAgDC,MAAA;IAAjCwB,aAAY,EAAExB,MAAA,CAAAyB;EAAgB,G"},"metadata":{},"sourceType":"module","externalDependencies":[]}