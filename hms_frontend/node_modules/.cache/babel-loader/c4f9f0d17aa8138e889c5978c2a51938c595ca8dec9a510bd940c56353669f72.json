{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  id: \"app\"\n};\nconst _hoisted_2 = [\"onClick\"];\nconst _hoisted_3 = {\n  key: 1,\n  type: \"text\",\n  value: \"无法取消\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_demo_title = _resolveComponent(\"demo-title\");\n  const _component_Column = _resolveComponent(\"Column\");\n  const _component_DataTable = _resolveComponent(\"DataTable\");\n  const _component_demo_bottom = _resolveComponent(\"demo-bottom\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_demo_title), _createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_DataTable, {\n    value: $data.appointments\n  }, {\n    default: _withCtx(() => [_createVNode(_component_Column, {\n      field: \"orderId\",\n      header: \"预约id\",\n      sortable: \"\"\n    }), _createVNode(_component_Column, {\n      field: \"patientId\",\n      header: \"患者id\",\n      sortable: \"\"\n    }), _createVNode(_component_Column, {\n      field: \"doctorId\",\n      header: \"医生id\",\n      sortable: \"\"\n    }), _createVNode(_component_Column, {\n      field: \"day\",\n      header: \"日期\",\n      sortable: \"\"\n    }), _createVNode(_component_Column, {\n      field: \"time_start\",\n      header: \"开始时间\"\n    }, {\n      body: _withCtx(slotProps => [_createTextVNode(_toDisplayString($options.removeTAndBefore(slotProps.data.time_start)), 1 /* TEXT */)]),\n\n      _: 1 /* STABLE */\n    }), _createVNode(_component_Column, {\n      field: \"time_end\",\n      header: \"结束时间\"\n    }, {\n      body: _withCtx(slotProps => [_createTextVNode(_toDisplayString($options.removeTAndBefore(slotProps.data.time_end)), 1 /* TEXT */)]),\n\n      _: 1 /* STABLE */\n    }), _createVNode(_component_Column, {\n      field: \"orderStatus\",\n      header: \"预约状态\"\n    }), _createVNode(_component_Column, {\n      header: \"取消预约\"\n    }, {\n      body: _withCtx(data => [data.data.orderStatus === 3 ? (_openBlock(), _createElementBlock(\"input\", {\n        key: 0,\n        type: \"button\",\n        value: \"取消预约\",\n        onClick: $event => $options.deleteAppointment(data.data.orderId)\n      }, null, 8 /* PROPS */, _hoisted_2)) : (_openBlock(), _createElementBlock(\"input\", _hoisted_3))]),\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"value\"])]), _createVNode(_component_demo_bottom)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["id","type","value","_createVNode","_component_demo_title","_createElementVNode","_hoisted_1","_component_DataTable","$data","appointments","_component_Column","field","header","sortable","body","_withCtx","slotProps","$options","removeTAndBefore","data","time_start","time_end","orderStatus","_createElementBlock","onClick","$event","deleteAppointment","orderId","_hoisted_3","_component_demo_bottom"],"sources":["D:\\Desktop\\HMS-front-end\\hms_frontend\\src\\views\\CheckMyAppointment.vue"],"sourcesContent":["<template>\r\n    <demo-title/>\r\n\r\n    <div id=\"app\">\r\n        <DataTable :value=\"appointments\">\r\n            <Column field=\"orderId\" header=\"预约id\" sortable></Column>\r\n            <Column field=\"patientId\" header=\"患者id\" sortable></Column>\r\n            <Column field=\"doctorId\" header=\"医生id\" sortable></Column>\r\n            <Column field=\"day\" header=\"日期\" sortable></Column>\r\n            <Column field=\"time_start\" header=\"开始时间\">\r\n                <template #body=\"slotProps\">\r\n                    {{ removeTAndBefore(slotProps.data.time_start) }}\r\n                </template>\r\n            </Column>\r\n            <Column field=\"time_end\" header=\"结束时间\">\r\n                <template #body=\"slotProps\">\r\n                    {{ removeTAndBefore(slotProps.data.time_end) }}\r\n                </template>\r\n            </Column>\r\n            <Column field=\"orderStatus\" header=\"预约状态\"></Column>\r\n            <Column header=\"取消预约\">\r\n                <template #body=\"data\">\r\n                    <input v-if=\"data.data.orderStatus === 3\" type=\"button\" value=\"取消预约\" @click=\"deleteAppointment(data.data.orderId)\">\r\n                    <input v-else type=\"text\" value=\"无法取消\">\r\n                </template>\r\n            </Column>\r\n        </DataTable>\r\n        </div>\r\n    <demo-bottom/>\r\n</template>\r\n\r\n<script>\r\nimport DemoBottom from '../components/DemoBottom.vue';\r\nimport DemoTitle from '../components/DemoTitle.vue';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n    name:'CheckMyAppointment',\r\n    components: { \r\n        DemoBottom,\r\n        DemoTitle \r\n    },\r\n    data() {\r\n        return {\r\n            appointments: []\r\n        }\r\n    },\r\n    methods: {\r\n        removeTAndBefore(str) {\r\n            const index = str.indexOf('T');\r\n            return str.substring(index + 1);\r\n        },\r\n        deleteAppointment(orderId) {\r\n            axios.delete(`http://121.199.161.134:8080/deleteAppointment`,{\r\n                params:{\r\n                    token:\"eyJhbGciOiJIUzI1NiJ9.eyJub3dMb2dnZWRJblR5cGUiOiJub3dMb2dnZWRJblR5cGVQYXRpZW50Iiwibm93TG9nZ2VkSW5JZCI6IlAwMDAwMDAwMDAwMCIsImlhdCI6MTY4NDc0NTUxOCwiZXhwIjoxNjg2NTQ1NTE4fQ.5dh7XJTkDsaVpHrsTBw4YGs8lnKdY1GRnNCgbJZLtC0\",\r\n                    orderId:orderId\r\n                }\r\n            })\r\n            .then(response => {\r\n                console.log(response);\r\n                if(response.data.code == 0)\r\n                {\r\n                    alert(response.data.msg+\"，取消失败\");\r\n                }else{\r\n                    alert(\"成功取消预约\");\r\n                    this.getPatientAppointment();\r\n                }       \r\n            })\r\n            .catch(error => {\r\n                console.error(error);\r\n            })\r\n        },\r\n        getPatientAppointment(){\r\n            axios.get('http://121.199.161.134:8080/getPatientAppointment',{\r\n                params:{\r\n                    token: \"eyJhbGciOiJIUzI1NiJ9.eyJub3dMb2dnZWRJblR5cGUiOiJub3dMb2dnZWRJblR5cGVQYXRpZW50Iiwibm93TG9nZ2VkSW5JZCI6IlAwMDAwMDAwMDAwMCIsImlhdCI6MTY4NDc0NTUxOCwiZXhwIjoxNjg2NTQ1NTE4fQ.5dh7XJTkDsaVpHrsTBw4YGs8lnKdY1GRnNCgbJZLtC0\"\r\n                }\r\n            })\r\n            .then(response => {\r\n                this.appointments = response.data.data;\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n            });\r\n        }\r\n    },\r\n    mounted() {\r\n        this.getPatientAppointment();\r\n    }\r\n}\r\n\r\n\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"mappings":";;EAGSA,EAAE,EAAC;AAAK;;;;EAoBiBC,IAAI,EAAC,MAAM;EAACC,KAAK,EAAC;;;;;;;6DAtBhDC,YAAA,CAAaC,qBAAA,GAEbC,mBAAA,CAwBU,OAxBVC,UAwBU,GAvBNH,YAAA,CAsBYI,oBAAA;IAtBAL,KAAK,EAAEM,KAAA,CAAAC;EAAY;sBAC3B,MAAwD,CAAxDN,YAAA,CAAwDO,iBAAA;MAAhDC,KAAK,EAAC,SAAS;MAACC,MAAM,EAAC,MAAM;MAACC,QAAQ,EAAR;QACtCV,YAAA,CAA0DO,iBAAA;MAAlDC,KAAK,EAAC,WAAW;MAACC,MAAM,EAAC,MAAM;MAACC,QAAQ,EAAR;QACxCV,YAAA,CAAyDO,iBAAA;MAAjDC,KAAK,EAAC,UAAU;MAACC,MAAM,EAAC,MAAM;MAACC,QAAQ,EAAR;QACvCV,YAAA,CAAkDO,iBAAA;MAA1CC,KAAK,EAAC,KAAK;MAACC,MAAM,EAAC,IAAI;MAACC,QAAQ,EAAR;QAChCV,YAAA,CAISO,iBAAA;MAJDC,KAAK,EAAC,YAAY;MAACC,MAAM,EAAC;;MACnBE,IAAI,EAAAC,QAAA,CAAEC,SAAS,K,kCACnBC,QAAA,CAAAC,gBAAgB,CAACF,SAAS,CAACG,IAAI,CAACC,UAAU,kB;;;QAGrDjB,YAAA,CAISO,iBAAA;MAJDC,KAAK,EAAC,UAAU;MAACC,MAAM,EAAC;;MACjBE,IAAI,EAAAC,QAAA,CAAEC,SAAS,K,kCACnBC,QAAA,CAAAC,gBAAgB,CAACF,SAAS,CAACG,IAAI,CAACE,QAAQ,kB;;;QAGnDlB,YAAA,CAAmDO,iBAAA;MAA3CC,KAAK,EAAC,aAAa;MAACC,MAAM,EAAC;QACnCT,YAAA,CAKSO,iBAAA;MALDE,MAAM,EAAC;IAAM;MACNE,IAAI,EAAAC,QAAA,CAAEI,IAAI,KACJA,IAAI,CAACA,IAAI,CAACG,WAAW,U,cAAlCC,mBAAA,CAAmH;;QAAzEtB,IAAI,EAAC,QAAQ;QAACC,KAAK,EAAC,MAAM;QAAEsB,OAAK,EAAAC,MAAA,IAAER,QAAA,CAAAS,iBAAiB,CAACP,IAAI,CAACA,IAAI,CAACQ,OAAO;4DAChHJ,mBAAA,CAAuC,SAAvCK,UAAuC,G;;;;;kCAKvDzB,YAAA,CAAc0B,sBAAA,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}