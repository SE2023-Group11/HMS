{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Card from 'primevue/card';\nimport Dialog from 'primevue/dialog';\nimport Button from 'primevue/button';\nimport ConfirmDialog from 'primevue/confirmdialog';\nimport { onMounted, ref, watch, watchEffect } from 'vue';\nimport axios from 'axios';\nimport { useConfirm } from 'primevue/useconfirm';\nimport { useToast } from 'primevue/usetoast';\nexport default {\n  __name: 'NotifyInfo',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    let string1 = \"医生注册申请\";\n    let string2 = \"医生信息修改申请\";\n    let array = ref([]);\n    let visibleList = [];\n    let detailInfo = ref({});\n    const confirm = useConfirm();\n    const toast = useToast();\n    let token = \"eyJhbGciOiJIUzI1NiJ9.eyJub3dMb2dnZWRJblR5cGUiOiJub3dMb2dnZWRJblR5cGVBZG1pbiIsIm5vd0xvZ2dlZEluSWQiOiIxIiwiaWF0IjoxNjg0NzQ2OTQxLCJleHAiOjE2ODY1NDY5NDF9.npgDMKJW-7zrsoAlBmdtuWbQNqzhi_0bBzjXieLqKu8\";\n    onMounted(() => {\n      axios({\n        method: 'get',\n        url: 'http://121.199.161.134:8080/getAllNotifications',\n        params: {\n          token: token\n        }\n      }).then(res => {\n        console.log(res);\n        array.value = res.data.data;\n        console.log(array);\n        let i = 0;\n        visibleList = [];\n        for (i = 0; i < array.value.length; i++) {\n          visibleList.push(ref(false));\n        }\n      });\n    });\n    function getDetailInfo(item) {\n      visibleList[array.value.indexOf(item)].value = true;\n      axios({\n        method: 'post',\n        url: 'http://121.199.161.134:8080/getNotifyInfoByID',\n        params: {\n          detailId: item.detailId,\n          token: token\n        }\n      }).then(res => {\n        console.log(res);\n        detailInfo.value = res.data.data;\n      });\n    }\n    function _acceptNotif(id) {\n      console.log(id);\n      axios({\n        method: 'post',\n        url: 'http://121.199.161.134:8080/acceptNotify',\n        params: {\n          infoId: id,\n          token: token\n        }\n      }).then(res => {\n        console.log(res);\n        location.reload();\n      });\n    }\n    const acceptNotif = id => {\n      confirm.require({\n        message: '确定要同意该请求吗？',\n        header: '同意请求',\n        accept: () => {\n          toast.add({\n            severity: 'info',\n            summary: '已确认',\n            detail: '你已接受该申请',\n            life: 3000\n          });\n          _acceptNotif(id);\n        }\n      });\n    };\n    function _declineNotif(id) {\n      axios({\n        method: 'post',\n        url: 'http://121.199.161.134:8080/declineNotify',\n        params: {\n          infoId: id,\n          token: token\n        }\n      }).then(res => {\n        console.log(res);\n        location.reload();\n      });\n    }\n    const declineNotif = id => {\n      confirm.require({\n        message: '确定要拒绝该请求吗？',\n        header: '拒绝请求',\n        accept: () => {\n          toast.add({\n            severity: 'info',\n            summary: '已确认',\n            detail: '你已拒绝该申请',\n            life: 3000\n          });\n          _declineNotif(id);\n        }\n      });\n    };\n\n    /*function generateList(res)\r\n    {\r\n        let i = 0\r\n        let array_t = res.data.data\r\n        console.log(array_t)\r\n        for(i=0; i<array_t.length; i++)\r\n        {\r\n            // console.log(array_t[i])\r\n            array.value[i] = array_t[i]\r\n        }\r\n        console.log(array.value.length)\r\n    }*/\n\n    const __returned__ = {\n      get string1() {\n        return string1;\n      },\n      set string1(v) {\n        string1 = v;\n      },\n      get string2() {\n        return string2;\n      },\n      set string2(v) {\n        string2 = v;\n      },\n      get array() {\n        return array;\n      },\n      set array(v) {\n        array = v;\n      },\n      get visibleList() {\n        return visibleList;\n      },\n      set visibleList(v) {\n        visibleList = v;\n      },\n      get detailInfo() {\n        return detailInfo;\n      },\n      set detailInfo(v) {\n        detailInfo = v;\n      },\n      confirm,\n      toast,\n      get token() {\n        return token;\n      },\n      set token(v) {\n        token = v;\n      },\n      getDetailInfo,\n      _acceptNotif,\n      acceptNotif,\n      _declineNotif,\n      declineNotif,\n      get Card() {\n        return Card;\n      },\n      get Dialog() {\n        return Dialog;\n      },\n      get Button() {\n        return Button;\n      },\n      get ConfirmDialog() {\n        return ConfirmDialog;\n      },\n      onMounted,\n      ref,\n      watch,\n      watchEffect,\n      get axios() {\n        return axios;\n      },\n      get useConfirm() {\n        return useConfirm;\n      },\n      get useToast() {\n        return useToast;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["Card","Dialog","Button","ConfirmDialog","onMounted","ref","watch","watchEffect","axios","useConfirm","useToast","string1","string2","array","visibleList","detailInfo","confirm","toast","token","method","url","params","then","res","console","log","value","data","i","length","push","getDetailInfo","item","indexOf","detailId","_acceptNotif","id","infoId","location","reload","acceptNotif","require","message","header","accept","add","severity","summary","detail","life","_declineNotif","declineNotif"],"sources":["D:/Desktop/HMS-front-end/hms_frontend/src/manager/components/notifyManage/NotifyInfo.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <div style=\"display:flex; justify-content:center; align-items:center;\">\r\n            <div class=\"card\">\r\n                <Card v-for=\"item in array\" :key=\"array.indexOf(item)\" style=\"width: 45em; margin: 10px\">\r\n                    <template #title>{{ item.infoType==1?string1:string2 }}</template>\r\n                    <template #content>\r\n                        <div  style=\"display: flex; justify-content: center;\">\r\n                            <table style=\"text-align: center;\">\r\n                                <tr>\r\n                                    <td style=\"width: 120px;\">发起人：</td>\r\n                                    <td style=\"width: 300px;\">{{ item.name }}</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>所在科室：</td>\r\n                                    <td>{{ item.sectionFirName+\"-\"+item.sectionSecName }}</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>发起时间：</td>\r\n                                    <td>{{ item.time.split(\"T\")[0]+\" \"+item.time.split(\"T\")[1] }}</td>\r\n                                </tr>\r\n                            </table>\r\n                        </div>                        \r\n                        <div class=\"card flex justify-content-center\" style=\"margin-top: 20px;\">\r\n                            <ConfirmDialog></ConfirmDialog>\r\n                            <Button @click=\"getDetailInfo(item)\">详细信息</Button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n                            <Button @click=\"acceptNotif(item.infoId)\">同意</Button>&nbsp;&nbsp;&nbsp;\r\n                            <Button @click=\"declineNotif(item.infoId)\">拒绝</Button>\r\n                            <Dialog v-model:visible=\"visibleList[array.indexOf(item)].value\" modal header=\"详细信息\" :style=\"{ width: '50vw' }\">\r\n                                <table>\r\n                                    <tr>\r\n                                        <td style=\"width: 100px;\">姓名：</td>\r\n                                        <td>{{ detailInfo.doctorName }}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>医生编号：</td>\r\n                                        <td>{{ detailInfo.doctorId }}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>所在科室：</td>\r\n                                        <td>{{ detailInfo.doctorSection }}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>身份证号：</td>\r\n                                        <td>{{ detailInfo.doctorNumber }}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>手机号：</td>\r\n                                        <td>{{ detailInfo.doctorPhone }}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>个人简介：</td>\r\n                                        <td>{{ detailInfo.doctorIntroduction }}</td>\r\n                                    </tr>\r\n                                </table>\r\n                            </Dialog>\r\n                        </div>\r\n                    </template>\r\n                </Card>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport Card from 'primevue/card'\r\nimport Dialog from 'primevue/dialog'\r\nimport Button from 'primevue/button'\r\nimport ConfirmDialog from 'primevue/confirmdialog'\r\nimport { onMounted, ref, watch, watchEffect } from 'vue'\r\nimport axios from 'axios'\r\nimport { useConfirm } from 'primevue/useconfirm'\r\nimport { useToast } from 'primevue/usetoast'\r\nlet string1 = \"医生注册申请\"\r\nlet string2 = \"医生信息修改申请\"\r\nlet array = ref([])\r\nlet visibleList = []\r\nlet detailInfo = ref({})\r\nconst confirm = useConfirm()\r\nconst toast = useToast();\r\nlet token = \"eyJhbGciOiJIUzI1NiJ9.eyJub3dMb2dnZWRJblR5cGUiOiJub3dMb2dnZWRJblR5cGVBZG1pbiIsIm5vd0xvZ2dlZEluSWQiOiIxIiwiaWF0IjoxNjg0NzQ2OTQxLCJleHAiOjE2ODY1NDY5NDF9.npgDMKJW-7zrsoAlBmdtuWbQNqzhi_0bBzjXieLqKu8\"\r\nonMounted(()=>{\r\n    axios({\r\n        method: 'get',\r\n        url: 'http://121.199.161.134:8080/getAllNotifications',\r\n        params:{\r\n            token:token\r\n        }\r\n    }).then((res)=>{\r\n        console.log(res)\r\n        array.value = res.data.data\r\n        console.log(array)\r\n\r\n        let i = 0\r\n        visibleList = []\r\n        for(i=0; i<array.value.length; i++)\r\n        {\r\n            visibleList.push(ref(false))\r\n        }\r\n    })    \r\n})\r\n\r\n\r\nfunction getDetailInfo(item)\r\n{\r\n    visibleList[array.value.indexOf(item)].value = true\r\n    axios({\r\n        method:'post',\r\n        url:'http://121.199.161.134:8080/getNotifyInfoByID',\r\n        params:{\r\n            detailId: item.detailId,\r\n            token:token\r\n        }\r\n    }).then((res)=>{\r\n        console.log(res)\r\n        detailInfo.value = res.data.data\r\n    })\r\n}\r\nfunction _acceptNotif(id)\r\n{\r\n    console.log(id)\r\n    axios({\r\n        method: 'post',\r\n        url: 'http://121.199.161.134:8080/acceptNotify',\r\n        params: {\r\n            infoId:id,\r\n            token:token\r\n        }\r\n    }).then((res)=>{\r\n        console.log(res)\r\n        location.reload()\r\n    })\r\n}\r\n\r\nconst acceptNotif = (id) => {\r\n    confirm.require({\r\n        message: '确定要同意该请求吗？',\r\n        header: '同意请求',\r\n        accept: () => {\r\n            toast.add({ severity: 'info', summary: '已确认', detail: '你已接受该申请', life: 3000 });\r\n            _acceptNotif(id)\r\n        }\r\n    })\r\n}\r\n\r\nfunction _declineNotif(id)\r\n{\r\n    axios({\r\n        method: 'post',\r\n        url: 'http://121.199.161.134:8080/declineNotify',\r\n        params: {\r\n            infoId:id,\r\n            token:token\r\n        }\r\n    }).then((res)=>{\r\n        console.log(res)\r\n        location.reload()\r\n    })\r\n}\r\n\r\nconst declineNotif = (id) => {\r\n    confirm.require({\r\n        message: '确定要拒绝该请求吗？',\r\n        header: '拒绝请求',\r\n        accept: () => {\r\n            toast.add({ severity: 'info', summary: '已确认', detail: '你已拒绝该申请', life: 3000 });\r\n            _declineNotif(id)\r\n        }\r\n    })\r\n}\r\n\r\n/*function generateList(res)\r\n{\r\n    let i = 0\r\n    let array_t = res.data.data\r\n    console.log(array_t)\r\n    for(i=0; i<array_t.length; i++)\r\n    {\r\n        // console.log(array_t[i])\r\n        array.value[i] = array_t[i]\r\n    }\r\n    console.log(array.value.length)\r\n}*/\r\n</script>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}