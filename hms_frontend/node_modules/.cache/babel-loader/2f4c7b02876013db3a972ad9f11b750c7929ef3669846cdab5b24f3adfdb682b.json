{"ast":null,"code":"import { ref } from 'vue';\nimport axios from 'axios';\n//primevue\nimport InputText from 'primevue/inputtext';\nimport Button from 'primevue/button';\nimport Card from 'primevue/card';\nimport Panel from 'primevue/panel';\nimport Textarea from 'primevue/textarea';\nimport Message from 'primevue/message';\n//进行数据传输的时候用的变量\n\nexport default {\n  __name: 'SelfSpace',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const id = ref('123');\n    const name = ref('');\n    const age = ref('');\n    const sex = ref('');\n    const birthday = ref('');\n    const region = ref('');\n    const email = ref('');\n    const idCard = ref('');\n    const history = ref('');\n\n    // onMounted(() => {\n    //     getinfo();\n    // })\n\n    // 在初始的时候对于当前的用户的个人信息进行获取，并且展示在面板上\n    function getinfo() {\n      axios.get('http://localhost:8080/getinformation', {\n        params: {\n          pid: id.value // 传递 ID 参数\n        }\n      }).then(response => {\n        // 成功获取数据后的处理逻辑\n        console.log(response.data);\n        const data = response.data;\n        namecontent.value = data.name;\n        agecontent.value = data.age;\n        sexcontent.value = data.sex;\n        bircontent.value = data.birthday;\n        regcontent.value = data.region;\n        emailcontent.value = data.email;\n        idCardcontent.value = data.idCard;\n        phonecontent.value = data.phone;\n        historycontent.value = data.history;\n      }).catch(error => {\n        // 处理错误的逻辑\n        console.error(error);\n      });\n    }\n\n    // 对于个人的信息框的设置\n    const pid = ref('21371101');\n\n    //下面这些的逻辑是实现当点击对应的信息的时候弹出表框使得可以进行修改\n    // 姓名\n    const nameediting = ref(false);\n    const namecontent = ref('Hello, world!');\n    const nametempContent = ref('');\n    function namestartEditing() {\n      nameediting.value = true;\n      nametempContent.value = namecontent.value;\n      judmess.value = 0;\n    }\n    function namestopEditing() {\n      nameediting.value = false;\n      namecontent.value = nametempContent.value;\n    }\n    // 年龄\n    const ageediting = ref(false);\n    const agecontent = ref('Hello, world!');\n    const agetempContent = ref('');\n    function agestartEditing() {\n      ageediting.value = true;\n      agetempContent.value = agecontent.value;\n      judmess.value = 0;\n    }\n    function agestopEditing() {\n      ageediting.value = false;\n      agecontent.value = agetempContent.value;\n    }\n    // 性别\n    const sexediting = ref(false);\n    const sexcontent = ref('Hello, world!');\n    const sextempContent = ref('');\n    function sexstartEditing() {\n      sexediting.value = true;\n      sextempContent.value = sexcontent.value;\n      judmess.value = 0;\n    }\n    function sexstopEditing() {\n      sexediting.value = false;\n      sexcontent.value = sextempContent.value;\n    }\n    // 出生日期\n    const birediting = ref(false);\n    const bircontent = ref('Hello, worldasdasd!');\n    const birtempContent = ref('');\n    function birstartEditing() {\n      birediting.value = true;\n      birtempContent.value = bircontent.value;\n      judmess.value = 0;\n    }\n    function birstopEditing() {\n      birediting.value = false;\n      bircontent.value = birtempContent.value;\n    }\n    // 地区\n    const regediting = ref(false);\n    const regcontent = ref('Hello, world!');\n    const regtempContent = ref('');\n    function regstartEditing() {\n      regediting.value = true;\n      regtempContent.value = regcontent.value;\n      judmess.value = 0;\n    }\n    function regstopEditing() {\n      regediting.value = false;\n      regcontent.value = regtempContent.value;\n    }\n    // 邮箱\n    const emailediting = ref(false);\n    const emailcontent = ref('Hello, world!');\n    const emailtempContent = ref('');\n    function emailstartEditing() {\n      emailediting.value = true;\n      emailtempContent.value = emailcontent.value;\n      judmess.value = 0;\n    }\n    function emailstopEditing() {\n      emailediting.value = false;\n      emailcontent.value = emailtempContent.value;\n    }\n    //手机号\n    const phoneediting = ref(false);\n    const phonecontent = ref('Hello, world!');\n    const phonetempContent = ref('');\n    function phonestartEditing() {\n      phoneediting.value = true;\n      phonetempContent.value = phonecontent.value;\n      judmess.value = 0;\n    }\n    function phonestopEditing() {\n      phoneediting.value = false;\n      phonecontent.value = phonetempContent.value;\n    }\n    // 身份证号\n    const idCardediting = ref(false);\n    const idCardcontent = ref('Hello, world!');\n    const idCardtempContent = ref('');\n    function idCardstartEditing() {\n      idCardediting.value = true;\n      idCardtempContent.value = idCardcontent.value;\n      judmess.value = 0;\n    }\n    function idCardstopEditing() {\n      idCardediting.value = false;\n      idCardcontent.value = idCardtempContent.value;\n    }\n\n    //这些是对于病史的框的代码，点击按钮可以进行修改内容\n    const historyediting = ref(false);\n    const historycontent = ref('Hello, world!');\n    const historytempContent = ref('');\n    const bthis = ref('编辑病史');\n    //判断传输的结果\n    const judhis = ref(0);\n    function edithistory() {\n      if (bthis.value == '编辑病史') {\n        historyediting.value = true;\n        historytempContent.value = historycontent.value;\n        bthis.value = '保存病史';\n      } else {\n        //这里首先要实现一个数据库对于病史的更新，向后端传输数据\n        axios.post(\"http://localhost:8080/savehistory\", {\n          pid: pid.value,\n          phistory: historytempContent.value\n        }).then(res => {\n          console.log(res);\n          judhis.value = 1;\n        }).catch(error => {\n          console.error(error);\n          judhis.value = -1;\n        });\n        historyediting.value = false;\n        historycontent.value = historytempContent.value;\n        bthis.value = '编辑病史';\n      }\n    }\n\n    //进行保存按钮的方法的编写,同时返回结果\n    const judmess = ref(0);\n    function save() {\n      axios.post('http://localhost:8080/changePatient', {\n        params: {\n          patient_id: pid.value,\n          patient_name: namecontent.value,\n          patient_idcard: idCardcontent.value,\n          patient_mail: emailcontent.value,\n          patient_phone: phonecontent.value,\n          patient_sex: sexcontent.value,\n          patient_birthday: bircontent.value,\n          patient_region: regcontent.value\n        }\n      }).then(response => {\n        console.log(response.data);\n        judmess.value = 1;\n      }).catch(error => {\n        console.error(error);\n        judmess.value = -1;\n      });\n    }\n\n    //实现对于图片的更换和保存\n    const imageUrl = ref('');\n    //将文件转换为formdata形式\n    const formData = new FormData();\n    //判断传输的结果是否成功\n    const judpic = ref(0);\n    function changePic(event) {\n      const file = event.target.files[0];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = () => {\n          imageUrl.value = reader.result;\n        };\n        reader.readAsDataURL(file);\n      }\n      //将上传的文件存到数据库\n      if (file?.file) {\n        const blob = new Blob([file], {\n          type: file.type\n        });\n        formData.append('file', blob, {\n          filename: 'image.jpg'\n        });\n        axios.post('http://localhost:8080/savePic', formData, {\n          params: {\n            pid: pid.value,\n            image: formData.values\n          }\n        }).then(response => {\n          console.log('Upload successful!');\n          judpic.value = 1;\n        }).catch(error => {\n          console.error('Upload failed: ', error);\n          judpic.value = -1;\n        });\n      } else {\n        console.error('文件不存在');\n      }\n    }\n    const __returned__ = {\n      id,\n      name,\n      age,\n      sex,\n      birthday,\n      region,\n      email,\n      idCard,\n      history,\n      getinfo,\n      pid,\n      nameediting,\n      namecontent,\n      nametempContent,\n      namestartEditing,\n      namestopEditing,\n      ageediting,\n      agecontent,\n      agetempContent,\n      agestartEditing,\n      agestopEditing,\n      sexediting,\n      sexcontent,\n      sextempContent,\n      sexstartEditing,\n      sexstopEditing,\n      birediting,\n      bircontent,\n      birtempContent,\n      birstartEditing,\n      birstopEditing,\n      regediting,\n      regcontent,\n      regtempContent,\n      regstartEditing,\n      regstopEditing,\n      emailediting,\n      emailcontent,\n      emailtempContent,\n      emailstartEditing,\n      emailstopEditing,\n      phoneediting,\n      phonecontent,\n      phonetempContent,\n      phonestartEditing,\n      phonestopEditing,\n      idCardediting,\n      idCardcontent,\n      idCardtempContent,\n      idCardstartEditing,\n      idCardstopEditing,\n      historyediting,\n      historycontent,\n      historytempContent,\n      bthis,\n      judhis,\n      edithistory,\n      judmess,\n      save,\n      imageUrl,\n      formData,\n      judpic,\n      changePic,\n      ref,\n      get axios() {\n        return axios;\n      },\n      get InputText() {\n        return InputText;\n      },\n      get Button() {\n        return Button;\n      },\n      get Card() {\n        return Card;\n      },\n      get Panel() {\n        return Panel;\n      },\n      get Textarea() {\n        return Textarea;\n      },\n      get Message() {\n        return Message;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","axios","InputText","Button","Card","Panel","Textarea","Message","id","name","age","sex","birthday","region","email","idCard","history","getinfo","get","params","pid","value","then","response","console","log","data","namecontent","agecontent","sexcontent","bircontent","regcontent","emailcontent","idCardcontent","phonecontent","phone","historycontent","catch","error","nameediting","nametempContent","namestartEditing","judmess","namestopEditing","ageediting","agetempContent","agestartEditing","agestopEditing","sexediting","sextempContent","sexstartEditing","sexstopEditing","birediting","birtempContent","birstartEditing","birstopEditing","regediting","regtempContent","regstartEditing","regstopEditing","emailediting","emailtempContent","emailstartEditing","emailstopEditing","phoneediting","phonetempContent","phonestartEditing","phonestopEditing","idCardediting","idCardtempContent","idCardstartEditing","idCardstopEditing","historyediting","historytempContent","bthis","judhis","edithistory","post","phistory","res","save","patient_id","patient_name","patient_idcard","patient_mail","patient_phone","patient_sex","patient_birthday","patient_region","imageUrl","formData","FormData","judpic","changePic","event","file","target","files","reader","FileReader","onload","result","readAsDataURL","blob","Blob","type","append","filename","image","values"],"sources":["D:/Desktop/HMS-front-end/hms_frontend/src/views/SelfSpace.vue"],"sourcesContent":["<template>\r\n    <div class=\"Hello\">\r\n        <p>欢迎来到{{ pid }}的个人空间！</p>\r\n    </div>\r\n    <div class=\"bg-image\">\r\n        <div class=\"leftpart\">\r\n            <div class=\"avatar\">\r\n                <img src=\"../../public/jay.jpg\" v-if=\"!imageUrl\" />\r\n                <img :src=\"imageUrl\" v-if=\"imageUrl\">\r\n            </div>\r\n            <div class=\"bt_changePic\">\r\n                <label for=\"file-input\" class=\"custom-file-upload\">\r\n                    <i class=\"fa fa-cloud-upload\"></i> 点击更换头像\r\n                </label>\r\n                <input id=\"file-input\" type=\"file\" @click=\"changePic\" style=\"display:none;\">\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"message\">\r\n            <Card class=\"mycard\">\r\n                <template #title>用户{{ pid }}的个人信息</template>\r\n                <template #content>\r\n                    <div class=\"edit\">\r\n                        <!-- 姓名 -->\r\n                        <div class=\"edit-item\" style=\"word-break: break-all;\">\r\n                            <div style=\"float:left\">姓名&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>\r\n                            <div style=\"float:left\">\r\n                                <div v-if=\"!nameediting\" @click=\"namestartEditing\">{{ namecontent }}</div>\r\n                                <InputText v-if=\"nameediting\" type=\"text\" v-model=\"nametempContent\" @blur=\"namestopEditing\"\r\n                                    @keyup.enter=\"namestopEditing\" />\r\n                            </div>\r\n                        </div>\r\n                        <!-- 年龄 -->\r\n                        <div class=\"edit-item\" style=\"word-break: break-all;\">\r\n                            <div style=\"float:left\">年龄&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>\r\n                            <div style=\"float:left\">\r\n                                <div v-if=\"!ageediting\" @click=\"agestartEditing\">{{ agecontent }}</div>\r\n                                <InputText v-if=\"ageediting\" type=\"text\" v-model=\"agetempContent\" @blur=\"agestopEditing\"\r\n                                    @keyup.enter=\"agestopEditing\" />\r\n                            </div>\r\n                        </div>\r\n                        <!-- // 性别 -->\r\n                        <div class=\"edit-item\" style=\"word-break: break-all;\">\r\n                            <div style=\"float:left\">性别&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>\r\n                            <div style=\"float:left\">\r\n                                <div v-if=\"!sexediting\" @click=\"sexstartEditing\">{{ sexcontent }}</div>\r\n                                <InputText v-if=\"sexediting\" type=\"text\" v-model=\"sextempContent\" @blur=\"sexstopEditing\"\r\n                                    @keyup.enter=\"sexstopEditing\" />\r\n                            </div>\r\n                        </div>\r\n                        <!-- // 出生日期 -->\r\n                        <div class=\"edit-item\" style=\"word-break: break-all;\">\r\n                            <div style=\"float:left\">出生日期&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>\r\n                            <div style=\"float:left\">\r\n                                <div v-if=\"!birediting\" @click=\"birstartEditing\">{{ bircontent }}</div>\r\n                                <InputText v-if=\"birediting\" type=\"text\" v-model=\"birtempContent\" @blur=\"birstopEditing\"\r\n                                    @keyup.enter=\"birstopEditing\" />\r\n                            </div>\r\n                        </div>\r\n                        <!-- //地区 -->\r\n                        <div class=\"edit-item\" style=\"word-break: break-all;\">\r\n                            <div style=\"float:left\">地区&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>\r\n                            <div style=\"float:left\">\r\n                                <div v-if=\"!regediting\" @click=\"regstartEditing\">{{ regcontent }}</div>\r\n                                <InputText v-if=\"regediting\" type=\"text\" v-model=\"regtempContent\" @blur=\"regstopEditing\"\r\n                                    @keyup.enter=\"regstopEditing\" />\r\n                            </div>\r\n                        </div>\r\n                        <!-- // 邮箱 -->\r\n                        <div class=\"edit-item\" style=\"word-break: break-all;\">\r\n                            <div style=\"float:left\">邮箱&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>\r\n                            <div style=\"float:left\">\r\n                                <div v-if=\"!emailediting\" @click=\"emailstartEditing\">{{ emailcontent }}</div>\r\n                                <InputText v-if=\"emailediting\" type=\"text\" v-model=\"emailtempContent\"\r\n                                    @blur=\"emailstopEditing\" @keyup.enter=\"emailstopEditing\" />\r\n                            </div>\r\n                        </div>\r\n                        <!-- 手机号 -->\r\n                        <div class=\"edit-item\" style=\"word-break: break-all;\">\r\n                            <div style=\"float:left\">手机号&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>\r\n                            <div style=\"float:left\">\r\n                                <div v-if=\"!phoneediting\" @click=\"phonestartEditing\">{{ phonecontent }}</div>\r\n                                <InputText v-if=\"phoneediting\" type=\"text\" v-model=\"phonetempContent\"\r\n                                    @blur=\"phonestopEditing\" @keyup.enter=\"phonestopEditing\" />\r\n                            </div>\r\n                        </div>\r\n                        <!-- // 身份证号 -->\r\n                        <div class=\"edit-item\" style=\"word-break: break-all;\">\r\n                            <div style=\"float:left\">身份证号&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>\r\n                            <div style=\"float:left\">\r\n                                <div v-if=\"!idCardediting\" @click=\"idCardstartEditing\">{{ idCardcontent }}</div>\r\n                                <InputText v-if=\"idCardediting\" type=\"text\" v-model=\"idCardtempContent\"\r\n                                    @blur=\"idCardstopEditing\" @keyup.enter=\"idCardstopEditing\" />\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"save_button\">\r\n                            <Button label=\"保存\" @click=\"save\" />\r\n                        </div>\r\n                    </div>\r\n\r\n                </template>\r\n            </Card>\r\n            <div class=\"history\">\r\n                <Panel v-if=\"!historyediting\" header=\"病史\" class=\"panel\">\r\n                    {{ historycontent }}\r\n                </Panel>\r\n                <div>\r\n                    <Textarea v-if=\"historyediting\" v-model=\"historytempContent\" rows=\"5\" cols=\"30\" />\r\n                </div>\r\n                <Button :label='bthis' @click=\"edithistory\" class=\"edithistory\" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- 消息通知的部分 -->\r\n    <div class=\"tongzhi\">\r\n        <!-- 上传头像 -->\r\n        <Message v-if=\"judpic == 1\" severity=\"success\">上传头像成功</Message>\r\n        <Message v-if=\"judpic == -1\" severity=\"error\">上传头像失败</Message>\r\n\r\n        <!-- 保存信息卡 -->\r\n        <Message v-if=\"judmess == 1\" severity=\"success\">保存信息卡成功</Message>\r\n        <Message v-if=\"judmess == -1\" severity=\"error\">保存信息卡失败</Message>\r\n\r\n        <!-- 编辑病史 -->\r\n        <Message v-if=\"judhis == 1\" severity=\"success\">编辑病史成功</Message>\r\n        <Message v-if=\"judhis == -1\" severity=\"error\">编辑病史失败</Message>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script setup>\r\nimport { ref } from 'vue';\r\nimport axios from 'axios';\r\n//primevue\r\nimport InputText from 'primevue/inputtext';\r\nimport Button from 'primevue/button';\r\nimport Card from 'primevue/card';\r\nimport Panel from 'primevue/panel';\r\nimport Textarea from 'primevue/textarea';\r\nimport Message from 'primevue/message';\r\n//进行数据传输的时候用的变量\r\nconst id = ref('123');\r\nconst name = ref('');\r\nconst age = ref('');\r\nconst sex = ref('');\r\nconst birthday = ref('');\r\nconst region = ref('');\r\nconst email = ref('');\r\nconst idCard = ref('');\r\nconst history = ref('');\r\n\r\n// onMounted(() => {\r\n//     getinfo();\r\n// })\r\n\r\n// 在初始的时候对于当前的用户的个人信息进行获取，并且展示在面板上\r\nfunction getinfo() {\r\n    axios.get('http://localhost:8080/getinformation', {\r\n        params: {\r\n            pid: id.value // 传递 ID 参数\r\n        }\r\n    })\r\n        .then(response => {\r\n            // 成功获取数据后的处理逻辑\r\n            console.log(response.data)\r\n            const data = response.data;\r\n\r\n            namecontent.value = data.name;\r\n            agecontent.value = data.age;\r\n            sexcontent.value = data.sex;\r\n            bircontent.value = data.birthday;\r\n            regcontent.value = data.region;\r\n            emailcontent.value = data.email;\r\n            idCardcontent.value = data.idCard;\r\n            phonecontent.value = data.phone;\r\n            historycontent.value = data.history;\r\n        })\r\n        .catch(error => {\r\n            // 处理错误的逻辑\r\n            console.error(error)\r\n        })\r\n}\r\n\r\n\r\n\r\n\r\n// 对于个人的信息框的设置\r\nconst pid = ref('21371101');\r\n\r\n//下面这些的逻辑是实现当点击对应的信息的时候弹出表框使得可以进行修改\r\n// 姓名\r\nconst nameediting = ref(false)\r\nconst namecontent = ref('Hello, world!')\r\nconst nametempContent = ref('')\r\nfunction namestartEditing() {\r\n    nameediting.value = true\r\n    nametempContent.value = namecontent.value\r\n    judmess.value = 0\r\n}\r\nfunction namestopEditing() {\r\n    nameediting.value = false\r\n    namecontent.value = nametempContent.value\r\n}\r\n// 年龄\r\nconst ageediting = ref(false)\r\nconst agecontent = ref('Hello, world!')\r\nconst agetempContent = ref('')\r\nfunction agestartEditing() {\r\n    ageediting.value = true\r\n    agetempContent.value = agecontent.value\r\n    judmess.value = 0\r\n}\r\nfunction agestopEditing() {\r\n    ageediting.value = false\r\n    agecontent.value = agetempContent.value\r\n}\r\n// 性别\r\nconst sexediting = ref(false)\r\nconst sexcontent = ref('Hello, world!')\r\nconst sextempContent = ref('')\r\nfunction sexstartEditing() {\r\n    sexediting.value = true\r\n    sextempContent.value = sexcontent.value\r\n    judmess.value = 0\r\n}\r\nfunction sexstopEditing() {\r\n    sexediting.value = false\r\n    sexcontent.value = sextempContent.value\r\n}\r\n// 出生日期\r\nconst birediting = ref(false)\r\nconst bircontent = ref('Hello, worldasdasd!')\r\nconst birtempContent = ref('')\r\nfunction birstartEditing() {\r\n    birediting.value = true\r\n    birtempContent.value = bircontent.value\r\n    judmess.value = 0\r\n}\r\nfunction birstopEditing() {\r\n    birediting.value = false\r\n    bircontent.value = birtempContent.value\r\n}\r\n// 地区\r\nconst regediting = ref(false)\r\nconst regcontent = ref('Hello, world!')\r\nconst regtempContent = ref('')\r\nfunction regstartEditing() {\r\n    regediting.value = true\r\n    regtempContent.value = regcontent.value\r\n    judmess.value = 0\r\n}\r\nfunction regstopEditing() {\r\n    regediting.value = false\r\n    regcontent.value = regtempContent.value\r\n}\r\n// 邮箱\r\nconst emailediting = ref(false)\r\nconst emailcontent = ref('Hello, world!')\r\nconst emailtempContent = ref('')\r\nfunction emailstartEditing() {\r\n    emailediting.value = true\r\n    emailtempContent.value = emailcontent.value\r\n    judmess.value = 0\r\n}\r\nfunction emailstopEditing() {\r\n    emailediting.value = false\r\n    emailcontent.value = emailtempContent.value\r\n}\r\n//手机号\r\nconst phoneediting = ref(false)\r\nconst phonecontent = ref('Hello, world!')\r\nconst phonetempContent = ref('')\r\nfunction phonestartEditing() {\r\n    phoneediting.value = true\r\n    phonetempContent.value = phonecontent.value\r\n    judmess.value = 0\r\n}\r\nfunction phonestopEditing() {\r\n    phoneediting.value = false\r\n    phonecontent.value = phonetempContent.value\r\n}\r\n// 身份证号\r\nconst idCardediting = ref(false)\r\nconst idCardcontent = ref('Hello, world!')\r\nconst idCardtempContent = ref('')\r\nfunction idCardstartEditing() {\r\n    idCardediting.value = true\r\n    idCardtempContent.value = idCardcontent.value\r\n    judmess.value = 0\r\n}\r\nfunction idCardstopEditing() {\r\n    idCardediting.value = false\r\n    idCardcontent.value = idCardtempContent.value\r\n}\r\n\r\n//这些是对于病史的框的代码，点击按钮可以进行修改内容\r\nconst historyediting = ref(false)\r\nconst historycontent = ref('Hello, world!')\r\nconst historytempContent = ref('')\r\nconst bthis = ref('编辑病史')\r\n//判断传输的结果\r\nconst judhis = ref(0);\r\nfunction edithistory() {\r\n    if (bthis.value == '编辑病史') {\r\n        historyediting.value = true;\r\n        historytempContent.value = historycontent.value;\r\n        bthis.value = '保存病史';\r\n\r\n    }\r\n    else {\r\n        //这里首先要实现一个数据库对于病史的更新，向后端传输数据\r\n        axios.post(\"http://localhost:8080/savehistory\", {\r\n            pid: pid.value,\r\n            phistory: historytempContent.value,\r\n        }).then(res => {\r\n            console.log(res);\r\n            judhis.value = 1;\r\n        }).catch(error => {\r\n            console.error(error)\r\n            judhis.value = -1;\r\n        })\r\n\r\n        historyediting.value = false;\r\n        historycontent.value = historytempContent.value;\r\n        bthis.value = '编辑病史';\r\n    }\r\n\r\n}\r\n\r\n\r\n//进行保存按钮的方法的编写,同时返回结果\r\nconst judmess = ref(0);\r\nfunction save() {\r\n    axios.post('http://localhost:8080/changePatient', {\r\n        params: {\r\n            patient_id: pid.value,\r\n            patient_name: namecontent.value,\r\n            patient_idcard: idCardcontent.value,\r\n            patient_mail: emailcontent.value,\r\n            patient_phone: phonecontent.value,\r\n            patient_sex: sexcontent.value,\r\n            patient_birthday: bircontent.value,\r\n            patient_region: regcontent.value\r\n\r\n        }\r\n    })\r\n        .then(response => {\r\n            console.log(response.data)\r\n            judmess.value = 1;\r\n        })\r\n        .catch(error => {\r\n            console.error(error)\r\n            judmess.value = -1;\r\n        })\r\n}\r\n\r\n//实现对于图片的更换和保存\r\nconst imageUrl = ref('');\r\n//将文件转换为formdata形式\r\nconst formData = new FormData();\r\n//判断传输的结果是否成功\r\nconst judpic = ref(0);\r\nfunction changePic(event) {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n        const reader = new FileReader();\r\n\r\n        reader.onload = () => {\r\n            imageUrl.value = reader.result;\r\n        };\r\n        reader.readAsDataURL(file);\r\n    }\r\n    //将上传的文件存到数据库\r\n    if (file?.file) {\r\n        const blob = new Blob([file], { type: file.type });\r\n        formData.append('file', blob, { filename: 'image.jpg' });\r\n        axios.post('http://localhost:8080/savePic', formData, {\r\n            params: {\r\n                pid: pid.value,\r\n                image: formData.values,\r\n            }\r\n        }).then(response => {\r\n            console.log('Upload successful!');\r\n            judpic.value = 1;\r\n        }).catch(error => {\r\n            console.error('Upload failed: ', error);\r\n            judpic.value = -1;\r\n        });\r\n    }\r\n    else {\r\n        console.error('文件不存在')\r\n    }\r\n}\r\n</script>\r\n\r\n\r\n<style>\r\n.Hello {\r\n    position: absolute;\r\n    left: 250px;\r\n    top: 10px;\r\n    width: 800px;\r\n    font-size: 30px;\r\n}\r\n\r\n.bg-image {\r\n    position: absolute;\r\n    left: 250px;\r\n    width: 1000px;\r\n    height: 900px;\r\n    top: 0px;\r\n}\r\n\r\n.message {\r\n    position: absolute;\r\n    top: 200px;\r\n}\r\n\r\n.bt_changePic {\r\n    position: relative;\r\n    left: 50px;\r\n    top: 20px;\r\n    z-index: 9999;\r\n}\r\n\r\n.leftpart {\r\n    position: relative;\r\n    left: 100px;\r\n    width: 250px;\r\n    height: 600px;\r\n    top: 100px;\r\n    border-right: 2px solid rgb(11, 11, 18);\r\n}\r\n\r\n\r\n.avatar {\r\n    position: relative;\r\n    /* left: 150px;*/\r\n    width: 200px;\r\n    height: 200px;\r\n    top: 10px;\r\n    border-radius: 50%;\r\n    overflow: hidden;\r\n}\r\n\r\n.choosePic {\r\n    color: blue;\r\n}\r\n\r\n.avatar img {\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: cover;\r\n}\r\n\r\n.edithistory {\r\n    position: relative;\r\n    left: 150px;\r\n}\r\n\r\n.mycard {\r\n    position: relative;\r\n    left: 450px;\r\n    bottom: 120px;\r\n    width: 400px;\r\n    height: 460px;\r\n}\r\n\r\n.history {\r\n    position: relative;\r\n    left: 450px;\r\n    bottom: 50px;\r\n    width: 400px;\r\n    height: 300px;\r\n}\r\n\r\n.panel .p-panel-content {\r\n    word-wrap: break-word;\r\n}\r\n\r\n.edit-item {\r\n    position: relative;\r\n    width: 300px;\r\n    height: 50px;\r\n    /* bottom: 10px; */\r\n    left: 10px;\r\n}\r\n\r\n.save_button {\r\n    position: relative;\r\n    width: 70px;\r\n    height: 50px;\r\n    bottom: 10px;\r\n    left: 160px;\r\n}\r\n\r\n.tongzhi {\r\n    position: absolute;\r\n    left: 600px;\r\n    width: 400px;\r\n    top: 20px;\r\n}\r\n</style>\r\n\r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}