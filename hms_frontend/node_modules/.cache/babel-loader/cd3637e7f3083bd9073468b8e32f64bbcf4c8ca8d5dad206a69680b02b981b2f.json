{"ast":null,"code":"import { openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, withKeys as _withKeys, createBlock as _createBlock, withCtx as _withCtx, createVNode as _createVNode, Fragment as _Fragment } from \"vue\";\nimport _imports_0 from '../../public/person.png';\nconst _hoisted_1 = {\n  class: \"bg-image\"\n};\nconst _hoisted_2 = {\n  class: \"leftpart\"\n};\nconst _hoisted_3 = {\n  class: \"avatar\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  src: _imports_0\n};\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"file-input\",\n  class: \"custom-file-upload\"\n}, [/*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fa fa-cloud-upload\"\n}), /*#__PURE__*/_createTextVNode(\" 点击更换头像 \")], -1 /* HOISTED */);\nconst _hoisted_7 = {\n  class: \"message\"\n};\nconst _hoisted_8 = {\n  class: \"edit\"\n};\nconst _hoisted_9 = {\n  class: \"edit-item\",\n  style: {\n    \"word-break\": \"break-all\"\n  }\n};\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"div\", {\n  style: {\n    \"float\": \"left\"\n  }\n}, \"姓名      \", -1 /* HOISTED */);\nconst _hoisted_11 = {\n  style: {\n    \"float\": \"left\"\n  }\n};\nconst _hoisted_12 = {\n  class: \"edit-item\",\n  style: {\n    \"word-break\": \"break-all\"\n  }\n};\nconst _hoisted_13 = /*#__PURE__*/_createElementVNode(\"div\", {\n  style: {\n    \"float\": \"left\"\n  }\n}, \"年龄      \", -1 /* HOISTED */);\nconst _hoisted_14 = {\n  style: {\n    \"float\": \"left\"\n  }\n};\nconst _hoisted_15 = {\n  class: \"edit-item\",\n  style: {\n    \"word-break\": \"break-all\"\n  }\n};\nconst _hoisted_16 = /*#__PURE__*/_createElementVNode(\"div\", {\n  style: {\n    \"float\": \"left\"\n  }\n}, \"性别      \", -1 /* HOISTED */);\nconst _hoisted_17 = {\n  style: {\n    \"float\": \"left\"\n  }\n};\nconst _hoisted_18 = {\n  class: \"edit-item\",\n  style: {\n    \"word-break\": \"break-all\"\n  }\n};\nconst _hoisted_19 = /*#__PURE__*/_createElementVNode(\"div\", {\n  style: {\n    \"float\": \"left\"\n  }\n}, \"出生日期      \", -1 /* HOISTED */);\nconst _hoisted_20 = {\n  style: {\n    \"float\": \"left\"\n  }\n};\nconst _hoisted_21 = {\n  class: \"edit-item\",\n  style: {\n    \"word-break\": \"break-all\"\n  }\n};\nconst _hoisted_22 = /*#__PURE__*/_createElementVNode(\"div\", {\n  style: {\n    \"float\": \"left\"\n  }\n}, \"邮箱      \", -1 /* HOISTED */);\nconst _hoisted_23 = {\n  style: {\n    \"float\": \"left\"\n  }\n};\nconst _hoisted_24 = {\n  class: \"edit-item\",\n  style: {\n    \"word-break\": \"break-all\"\n  }\n};\nconst _hoisted_25 = /*#__PURE__*/_createElementVNode(\"div\", {\n  style: {\n    \"float\": \"left\"\n  }\n}, \"手机号      \", -1 /* HOISTED */);\nconst _hoisted_26 = {\n  style: {\n    \"float\": \"left\"\n  }\n};\nconst _hoisted_27 = {\n  class: \"tongzhi\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [!$setup.imageUrl ? (_openBlock(), _createElementBlock(\"img\", _hoisted_4)) : _createCommentVNode(\"v-if\", true), $setup.imageUrl ? (_openBlock(), _createElementBlock(\"img\", {\n    key: 1,\n    src: $setup.imageUrl\n  }, null, 8 /* PROPS */, _hoisted_5)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", {\n    class: \"bt_changePic\"\n  }, [_hoisted_6, _createElementVNode(\"input\", {\n    id: \"file-input\",\n    type: \"file\",\n    onClick: $setup.changePic,\n    style: {\n      \"display\": \"none\"\n    }\n  })])]), _createElementVNode(\"div\", _hoisted_7, [_createVNode($setup[\"Card\"], {\n    class: \"mycard\"\n  }, {\n    title: _withCtx(() => [_createTextVNode(\"用户\" + _toDisplayString($setup.pid) + \"的个人信息\", 1 /* TEXT */)]),\n\n    content: _withCtx(() => [_createElementVNode(\"div\", _hoisted_8, [_createCommentVNode(\" 姓名 \"), _createElementVNode(\"div\", _hoisted_9, [_hoisted_10, _createElementVNode(\"div\", _hoisted_11, [!$setup.nameediting ? (_openBlock(), _createElementBlock(\"div\", {\n      key: 0,\n      onClick: $setup.namestartEditing\n    }, _toDisplayString($setup.namecontent), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), $setup.nameediting ? (_openBlock(), _createBlock($setup[\"InputText\"], {\n      key: 1,\n      type: \"text\",\n      modelValue: $setup.nametempContent,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.nametempContent = $event),\n      onBlur: $setup.namestopEditing,\n      onKeyup: _withKeys($setup.namestopEditing, [\"enter\"])\n    }, null, 8 /* PROPS */, [\"modelValue\", \"onKeyup\"])) : _createCommentVNode(\"v-if\", true)])]), _createCommentVNode(\" 年龄 \"), _createElementVNode(\"div\", _hoisted_12, [_hoisted_13, _createElementVNode(\"div\", _hoisted_14, [!$setup.ageediting ? (_openBlock(), _createElementBlock(\"div\", {\n      key: 0,\n      onClick: $setup.agestartEditing\n    }, _toDisplayString($setup.agecontent), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), $setup.ageediting ? (_openBlock(), _createBlock($setup[\"InputText\"], {\n      key: 1,\n      type: \"text\",\n      modelValue: $setup.agetempContent,\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.agetempContent = $event),\n      onBlur: $setup.agestopEditing,\n      onKeyup: _withKeys($setup.agestopEditing, [\"enter\"])\n    }, null, 8 /* PROPS */, [\"modelValue\", \"onKeyup\"])) : _createCommentVNode(\"v-if\", true)])]), _createCommentVNode(\" // 性别 \"), _createElementVNode(\"div\", _hoisted_15, [_hoisted_16, _createElementVNode(\"div\", _hoisted_17, [!$setup.sexediting ? (_openBlock(), _createElementBlock(\"div\", {\n      key: 0,\n      onClick: $setup.sexstartEditing\n    }, _toDisplayString($setup.sexcontent), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), $setup.sexediting ? (_openBlock(), _createBlock($setup[\"InputText\"], {\n      key: 1,\n      type: \"text\",\n      modelValue: $setup.sextempContent,\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.sextempContent = $event),\n      onBlur: $setup.sexstopEditing,\n      onKeyup: _withKeys($setup.sexstopEditing, [\"enter\"])\n    }, null, 8 /* PROPS */, [\"modelValue\", \"onKeyup\"])) : _createCommentVNode(\"v-if\", true)])]), _createCommentVNode(\" // 出生日期 \"), _createElementVNode(\"div\", _hoisted_18, [_hoisted_19, _createElementVNode(\"div\", _hoisted_20, [!$setup.birediting ? (_openBlock(), _createElementBlock(\"div\", {\n      key: 0,\n      onClick: $setup.birstartEditing\n    }, _toDisplayString($setup.bircontent), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), $setup.birediting ? (_openBlock(), _createBlock($setup[\"InputText\"], {\n      key: 1,\n      type: \"text\",\n      modelValue: $setup.birtempContent,\n      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.birtempContent = $event),\n      onBlur: $setup.birstopEditing,\n      onKeyup: _withKeys($setup.birstopEditing, [\"enter\"])\n    }, null, 8 /* PROPS */, [\"modelValue\", \"onKeyup\"])) : _createCommentVNode(\"v-if\", true)])]), _createCommentVNode(\" //地区 \"), _createCommentVNode(\" <div class=\\\"edit-item\\\" style=\\\"word-break: break-all;\\\">\\r\\n                            <div style=\\\"float:left\\\">地区&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>\\r\\n                            <div style=\\\"float:left\\\">\\r\\n                                <div v-if=\\\"!regediting\\\" @click=\\\"regstartEditing\\\">{{ regcontent }}</div>\\r\\n                                <InputText v-if=\\\"regediting\\\" type=\\\"text\\\" v-model=\\\"regtempContent\\\" @blur=\\\"regstopEditing\\\"\\r\\n                                    @keyup.enter=\\\"regstopEditing\\\" />\\r\\n                            </div>\\r\\n                        </div> \"), _createCommentVNode(\" // 邮箱 \"), _createElementVNode(\"div\", _hoisted_21, [_hoisted_22, _createElementVNode(\"div\", _hoisted_23, [!$setup.emailediting ? (_openBlock(), _createElementBlock(\"div\", {\n      key: 0,\n      onClick: $setup.emailstartEditing\n    }, _toDisplayString($setup.emailcontent), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), $setup.emailediting ? (_openBlock(), _createBlock($setup[\"InputText\"], {\n      key: 1,\n      type: \"text\",\n      modelValue: $setup.emailtempContent,\n      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.emailtempContent = $event),\n      onBlur: $setup.emailstopEditing,\n      onKeyup: _withKeys($setup.emailstopEditing, [\"enter\"])\n    }, null, 8 /* PROPS */, [\"modelValue\", \"onKeyup\"])) : _createCommentVNode(\"v-if\", true)])]), _createCommentVNode(\" 手机号 \"), _createElementVNode(\"div\", _hoisted_24, [_hoisted_25, _createElementVNode(\"div\", _hoisted_26, [!$setup.phoneediting ? (_openBlock(), _createElementBlock(\"div\", {\n      key: 0,\n      onClick: $setup.phonestartEditing\n    }, _toDisplayString($setup.phonecontent), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), $setup.phoneediting ? (_openBlock(), _createBlock($setup[\"InputText\"], {\n      key: 1,\n      type: \"text\",\n      modelValue: $setup.phonetempContent,\n      \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.phonetempContent = $event),\n      onBlur: $setup.phonestopEditing,\n      onKeyup: _withKeys($setup.phonestopEditing, [\"enter\"])\n    }, null, 8 /* PROPS */, [\"modelValue\", \"onKeyup\"])) : _createCommentVNode(\"v-if\", true)])])])]),\n    _: 1 /* STABLE */\n  }), _createCommentVNode(\" 病史是拓展内容 \"), _createCommentVNode(\" <div class=\\\"history\\\">\\r\\n                <Panel v-if=\\\"!historyediting\\\" header=\\\"病史\\\" class=\\\"panel\\\">\\r\\n                    {{ historycontent }}\\r\\n                </Panel>\\r\\n                <div>\\r\\n                    <Textarea v-if=\\\"historyediting\\\" v-model=\\\"historytempContent\\\" rows=\\\"5\\\" cols=\\\"30\\\" />\\r\\n                </div>\\r\\n                <Button :label='bthis' @click=\\\"edithistory\\\" class=\\\"edithistory\\\" />\\r\\n            </div> \")])]), _createCommentVNode(\" 消息通知的部分 \"), _createElementVNode(\"div\", _hoisted_27, [_createCommentVNode(\" 上传头像 \"), $setup.judpic == 1 ? (_openBlock(), _createBlock($setup[\"Message\"], {\n    key: 0,\n    severity: \"success\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"上传头像成功\")]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), $setup.judpic == -1 ? (_openBlock(), _createBlock($setup[\"Message\"], {\n    key: 1,\n    severity: \"error\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"上传头像失败\")]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 保存信息卡 \"), $setup.judmess == 1 ? (_openBlock(), _createBlock($setup[\"Message\"], {\n    key: 2,\n    severity: \"success\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"保存信息卡成功\")]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), $setup.judmess == -1 ? (_openBlock(), _createBlock($setup[\"Message\"], {\n    key: 3,\n    severity: \"error\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"保存信息卡失败\")]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 编辑病史 \"), $setup.judhis == 1 ? (_openBlock(), _createBlock($setup[\"Message\"], {\n    key: 4,\n    severity: \"success\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"编辑病史成功\")]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), $setup.judhis == -1 ? (_openBlock(), _createBlock($setup[\"Message\"], {\n    key: 5,\n    severity: \"error\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"编辑病史失败\")]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true)])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_imports_0","class","src","_createElementVNode","for","style","_hoisted_1","_hoisted_2","_hoisted_3","$setup","imageUrl","_createElementBlock","_hoisted_4","_hoisted_6","id","type","onClick","changePic","_hoisted_7","_createVNode","title","_withCtx","_toDisplayString","pid","content","_hoisted_8","_createCommentVNode","_hoisted_9","_hoisted_10","_hoisted_11","nameediting","namestartEditing","namecontent","_createBlock","nametempContent","$event","onBlur","namestopEditing","onKeyup","_withKeys","_hoisted_12","_hoisted_13","_hoisted_14","ageediting","agestartEditing","agecontent","agetempContent","agestopEditing","_hoisted_15","_hoisted_16","_hoisted_17","sexediting","sexstartEditing","sexcontent","sextempContent","sexstopEditing","_hoisted_18","_hoisted_19","_hoisted_20","birediting","birstartEditing","bircontent","birtempContent","birstopEditing","_hoisted_21","_hoisted_22","_hoisted_23","emailediting","emailstartEditing","emailcontent","emailtempContent","emailstopEditing","_hoisted_24","_hoisted_25","_hoisted_26","phoneediting","phonestartEditing","phonecontent","phonetempContent","phonestopEditing","_hoisted_27","judpic","severity","judmess","judhis"],"sources":["D:\\Desktop\\HMS-front-end\\hms_frontend\\src\\views\\D_PatientInfo.vue"],"sourcesContent":["<template>\r\n    <div class=\"bg-image\">\r\n        <div class=\"leftpart\">\r\n            <div class=\"avatar\">\r\n                <img src=\"../../public/person.png\" v-if=\"!imageUrl\" />\r\n                <img :src=\"imageUrl\" v-if=\"imageUrl\">\r\n            </div>\r\n            <div class=\"bt_changePic\">\r\n                <label for=\"file-input\" class=\"custom-file-upload\">\r\n                    <i class=\"fa fa-cloud-upload\"></i> 点击更换头像\r\n                </label>\r\n                <input id=\"file-input\" type=\"file\" @click=\"changePic\" style=\"display:none;\">\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"message\">\r\n            <Card class=\"mycard\">\r\n                <template #title>用户{{ pid }}的个人信息</template>\r\n                <template #content>\r\n                    <div class=\"edit\">\r\n                        <!-- 姓名 -->\r\n                        <div class=\"edit-item\" style=\"word-break: break-all;\">\r\n                            <div style=\"float:left\">姓名&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>\r\n                            <div style=\"float:left\">\r\n                                <div v-if=\"!nameediting\" @click=\"namestartEditing\">{{ namecontent }}</div>\r\n                                <InputText v-if=\"nameediting\" type=\"text\" v-model=\"nametempContent\" @blur=\"namestopEditing\"\r\n                                    @keyup.enter=\"namestopEditing\" />\r\n                            </div>\r\n                        </div>\r\n                        <!-- 年龄 -->\r\n                        <div class=\"edit-item\" style=\"word-break: break-all;\">\r\n                            <div style=\"float:left\">年龄&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>\r\n                            <div style=\"float:left\">\r\n                                <div v-if=\"!ageediting\" @click=\"agestartEditing\">{{ agecontent }}</div>\r\n                                <InputText v-if=\"ageediting\" type=\"text\" v-model=\"agetempContent\" @blur=\"agestopEditing\"\r\n                                    @keyup.enter=\"agestopEditing\" />\r\n                            </div>\r\n                        </div>\r\n                        <!-- // 性别 -->\r\n                        <div class=\"edit-item\" style=\"word-break: break-all;\">\r\n                            <div style=\"float:left\">性别&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>\r\n                            <div style=\"float:left\">\r\n                                <div v-if=\"!sexediting\" @click=\"sexstartEditing\">{{ sexcontent }}</div>\r\n                                <InputText v-if=\"sexediting\" type=\"text\" v-model=\"sextempContent\" @blur=\"sexstopEditing\"\r\n                                    @keyup.enter=\"sexstopEditing\" />\r\n                            </div>\r\n                        </div>\r\n                        <!-- // 出生日期 -->\r\n                        <div class=\"edit-item\" style=\"word-break: break-all;\">\r\n                            <div style=\"float:left\">出生日期&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>\r\n                            <div style=\"float:left\">\r\n                                <div v-if=\"!birediting\" @click=\"birstartEditing\">{{ bircontent }}</div>\r\n                                <InputText v-if=\"birediting\" type=\"text\" v-model=\"birtempContent\" @blur=\"birstopEditing\"\r\n                                    @keyup.enter=\"birstopEditing\" />\r\n                            </div>\r\n                        </div>\r\n                        <!-- //地区 -->\r\n                        <!-- <div class=\"edit-item\" style=\"word-break: break-all;\">\r\n                            <div style=\"float:left\">地区&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>\r\n                            <div style=\"float:left\">\r\n                                <div v-if=\"!regediting\" @click=\"regstartEditing\">{{ regcontent }}</div>\r\n                                <InputText v-if=\"regediting\" type=\"text\" v-model=\"regtempContent\" @blur=\"regstopEditing\"\r\n                                    @keyup.enter=\"regstopEditing\" />\r\n                            </div>\r\n                        </div> -->\r\n                        <!-- // 邮箱 -->\r\n                        <div class=\"edit-item\" style=\"word-break: break-all;\">\r\n                            <div style=\"float:left\">邮箱&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>\r\n                            <div style=\"float:left\">\r\n                                <div v-if=\"!emailediting\" @click=\"emailstartEditing\">{{ emailcontent }}</div>\r\n                                <InputText v-if=\"emailediting\" type=\"text\" v-model=\"emailtempContent\"\r\n                                    @blur=\"emailstopEditing\" @keyup.enter=\"emailstopEditing\" />\r\n                            </div>\r\n                        </div>\r\n                        <!-- 手机号 -->\r\n                        <div class=\"edit-item\" style=\"word-break: break-all;\">\r\n                            <div style=\"float:left\">手机号&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>\r\n                            <div style=\"float:left\">\r\n                                <div v-if=\"!phoneediting\" @click=\"phonestartEditing\">{{ phonecontent }}</div>\r\n                                <InputText v-if=\"phoneediting\" type=\"text\" v-model=\"phonetempContent\"\r\n                                    @blur=\"phonestopEditing\" @keyup.enter=\"phonestopEditing\" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </template>\r\n            </Card>\r\n            <!-- 病史是拓展内容 -->\r\n            <!-- <div class=\"history\">\r\n                <Panel v-if=\"!historyediting\" header=\"病史\" class=\"panel\">\r\n                    {{ historycontent }}\r\n                </Panel>\r\n                <div>\r\n                    <Textarea v-if=\"historyediting\" v-model=\"historytempContent\" rows=\"5\" cols=\"30\" />\r\n                </div>\r\n                <Button :label='bthis' @click=\"edithistory\" class=\"edithistory\" />\r\n            </div> -->\r\n        </div>\r\n    </div>\r\n    <!-- 消息通知的部分 -->\r\n    <div class=\"tongzhi\">\r\n        <!-- 上传头像 -->\r\n        <Message v-if=\"judpic == 1\" severity=\"success\">上传头像成功</Message>\r\n        <Message v-if=\"judpic == -1\" severity=\"error\">上传头像失败</Message>\r\n\r\n        <!-- 保存信息卡 -->\r\n        <Message v-if=\"judmess == 1\" severity=\"success\">保存信息卡成功</Message>\r\n        <Message v-if=\"judmess == -1\" severity=\"error\">保存信息卡失败</Message>\r\n\r\n        <!-- 编辑病史 -->\r\n        <Message v-if=\"judhis == 1\" severity=\"success\">编辑病史成功</Message>\r\n        <Message v-if=\"judhis == -1\" severity=\"error\">编辑病史失败</Message>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script setup>\r\nimport { ref } from 'vue';\r\nimport axios from 'axios';\r\n//primevue\r\nimport InputText from 'primevue/inputtext';\r\nimport Button from 'primevue/button';\r\nimport Card from 'primevue/card';\r\nimport Panel from 'primevue/panel';\r\nimport Textarea from 'primevue/textarea';\r\nimport Message from 'primevue/message';\r\n//进行数据传输的时候用的变量\r\nconst id = ref('123');\r\nconst token = sessionStorage.getItem('token');\r\n// onMounted(() => {\r\n//     getinfo();\r\n// })\r\n\r\n//通过患者的生日获得患者的年龄\r\nfunction calculateAge(birthday) {\r\n    const now = new Date();\r\n    const birthDate = new Date(birthday);\r\n\r\n    let age = now.getFullYear() - birthDate.getFullYear();\r\n    const monthDiff = now.getMonth() - birthDate.getMonth();\r\n\r\n    if (monthDiff < 0 || (monthDiff === 0 && now.getDate() < birthDate.getDate())) {\r\n        age--;\r\n    }\r\n\r\n    return age;\r\n}\r\n// 在初始的时候对于当前的用户的个人信息进行获取，并且展示在面板上\r\nfunction getinfo() {\r\n    axios.get('http://localhost:8080/getPatientInformation', {\r\n        params: {\r\n            token: token.value, // 传递token\r\n        }\r\n    })\r\n        .then(response => {\r\n            // 成功获取数据后的处理逻辑\r\n            console.log(response.data)\r\n            const data = response.data;\r\n\r\n            namecontent.value = data.patientName;\r\n            sexcontent.value = data.patientSex;\r\n            bircontent.value = data.patientBirthday;\r\n            agecontent.value = calculateAge(data.patientBirthday);\r\n            //regcontent.value = data.region;//这个暂时定为不返回\r\n            emailcontent.value = data.patientMail;\r\n            idCardcontent.value = data.patientNumber;\r\n            phonecontent.value = data.patientPhone;\r\n            historycontent.value = data.history;\r\n        })\r\n        .catch(error => {\r\n            // 处理错误的逻辑\r\n            console.error(error)\r\n        })\r\n}\r\n\r\n\r\n\r\n\r\n// 对于个人的信息框的设置\r\nconst pid = ref('21371101');\r\n\r\n//下面这些的逻辑是实现当点击对应的信息的时候弹出表框使得可以进行修改\r\n// 姓名\r\nconst nameediting = ref(false)\r\nconst namecontent = ref('张三')\r\nconst nametempContent = ref('')\r\nfunction namestartEditing() {\r\n    nameediting.value = true\r\n    nametempContent.value = namecontent.value\r\n    judmess.value = 0\r\n}\r\nfunction namestopEditing() {\r\n    nameediting.value = false\r\n    namecontent.value = nametempContent.value\r\n}\r\n// 年龄\r\nconst ageediting = ref(false)\r\nconst agecontent = ref('20')\r\nconst agetempContent = ref('')\r\nfunction agestartEditing() {\r\n    ageediting.value = true\r\n    agetempContent.value = agecontent.value\r\n    judmess.value = 0\r\n}\r\nfunction agestopEditing() {\r\n    ageediting.value = false\r\n    agecontent.value = agetempContent.value\r\n}\r\n// 性别\r\nconst sexediting = ref(false)\r\nconst sexcontent = ref('男')\r\nconst sextempContent = ref('')\r\nfunction sexstartEditing() {\r\n    sexediting.value = true\r\n    sextempContent.value = sexcontent.value\r\n    judmess.value = 0\r\n}\r\nfunction sexstopEditing() {\r\n    sexediting.value = false\r\n    sexcontent.value = sextempContent.value\r\n}\r\n// 出生日期\r\nconst birediting = ref(false)\r\nconst bircontent = ref('2002-10-24')\r\nconst birtempContent = ref('')\r\nfunction birstartEditing() {\r\n    birediting.value = true\r\n    birtempContent.value = bircontent.value\r\n    judmess.value = 0\r\n}\r\nfunction birstopEditing() {\r\n    birediting.value = false\r\n    bircontent.value = birtempContent.value\r\n}\r\n\r\n// 邮箱\r\nconst emailediting = ref(false)\r\nconst emailcontent = ref('13303453453@qq.com')\r\nconst emailtempContent = ref('')\r\nfunction emailstartEditing() {\r\n    emailediting.value = true\r\n    emailtempContent.value = emailcontent.value\r\n    judmess.value = 0\r\n}\r\nfunction emailstopEditing() {\r\n    emailediting.value = false\r\n    emailcontent.value = emailtempContent.value\r\n}\r\n//手机号\r\nconst phoneediting = ref(false)\r\nconst phonecontent = ref('18345664564')\r\nconst phonetempContent = ref('')\r\nfunction phonestartEditing() {\r\n    phoneediting.value = true\r\n    phonetempContent.value = phonecontent.value\r\n    judmess.value = 0\r\n}\r\nfunction phonestopEditing() {\r\n    phoneediting.value = false\r\n    phonecontent.value = phonetempContent.value\r\n}\r\n// 身份证号\r\nconst idCardediting = ref(false)\r\nconst idCardcontent = ref('34243242354534')\r\nconst idCardtempContent = ref('')\r\nfunction idCardstartEditing() {\r\n    idCardediting.value = true\r\n    idCardtempContent.value = idCardcontent.value\r\n    judmess.value = 0\r\n}\r\nfunction idCardstopEditing() {\r\n    idCardediting.value = false\r\n    idCardcontent.value = idCardtempContent.value\r\n}\r\n\r\n//这些是对于病史的框的代码，点击按钮可以进行修改内容\r\nconst historyediting = ref(false)\r\nconst historycontent = ref('这是我的病史')\r\nconst historytempContent = ref('')\r\nconst bthis = ref('编辑病史')\r\n//判断传输的结果\r\nconst judhis = ref(0);\r\nfunction edithistory() {\r\n    if (bthis.value == '编辑病史') {\r\n        historyediting.value = true;\r\n        historytempContent.value = historycontent.value;\r\n        bthis.value = '保存病史';\r\n\r\n    }\r\n    else {\r\n        //这里首先要实现一个数据库对于病史的更新，向后端传输数据\r\n        axios.post(\"http://localhost:8080/savehistory\", {\r\n            token: token.value, // 传递token\r\n            phistory: historytempContent.value,\r\n        }).then(res => {\r\n            console.log(res);\r\n            judhis.value = 1;\r\n        }).catch(error => {\r\n            console.error(error)\r\n            judhis.value = -1;\r\n        })\r\n\r\n        historyediting.value = false;\r\n        historycontent.value = historytempContent.value;\r\n        bthis.value = '编辑病史';\r\n    }\r\n\r\n}\r\n\r\nconst patient = {};\r\nfunction setpatinet() {\r\n    patient.patient_id = pid.value,\r\n        patient.patient_name = namecontent.value,\r\n        patient.patient_idcard = idCardcontent.value,\r\n        patient.patient_mail = emailcontent.value,\r\n        patient.patient_phone = phonecontent.value,\r\n        patient.patient_sex = sexcontent.value,\r\n        patient.patient_birthday = bircontent.value\r\n}\r\n//进行保存按钮的方法的编写,同时返回结果\r\nconst judmess = ref(0);\r\nfunction save() {\r\n    setpatinet();\r\n    axios.post('http://localhost:8080/changePatient', {\r\n        token: token.value,\r\n        patient\r\n    })\r\n        .then(response => {\r\n            console.log(response.data)\r\n            judmess.value = 1;\r\n        })\r\n        .catch(error => {\r\n            console.error(error)\r\n            judmess.value = -1;\r\n        })\r\n}\r\n\r\n//实现对于图片的更换和保存\r\nconst imageUrl = ref('');\r\n//将文件转换为formdata形式\r\nconst formData = new FormData();\r\n//判断传输的结果是否成功\r\nconst judpic = ref(0);\r\nfunction changePic(event) {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n        const reader = new FileReader();\r\n\r\n        reader.onload = () => {\r\n            imageUrl.value = reader.result;\r\n        };\r\n        reader.readAsDataURL(file);\r\n    }\r\n    //将上传的文件存到数据库\r\n    if (file?.file) {\r\n        const blob = new Blob([file], { type: file.type });\r\n        formData.append('file', blob, { filename: 'image.jpg' });\r\n        axios.post('http://localhost:8080/savePic', formData, {\r\n            params: {\r\n                pid: pid.value,\r\n                image: formData.values,\r\n            }\r\n        }).then(response => {\r\n            console.log('Upload successful!');\r\n            judpic.value = 1;\r\n        }).catch(error => {\r\n            console.error('Upload failed: ', error);\r\n            judpic.value = -1;\r\n        });\r\n    }\r\n    else {\r\n        console.error('文件不存在')\r\n    }\r\n}\r\n</script>\r\n\r\n\r\n<style>\r\n.Hello {\r\n    position: absolute;\r\n    left: 250px;\r\n    top: 10px;\r\n    width: 800px;\r\n    font-size: 30px;\r\n}\r\n\r\n.bg-image {\r\n    position: absolute;\r\n    left: 30%;\r\n    width: 1000px;\r\n    height: 900px;\r\n    top: 200px;\r\n    margin: 0 auto;\r\n    padding: 20px;\r\n    border: 1px solid #ccc;\r\n    border-radius: 5px;\r\n}\r\n\r\n.message {\r\n    position: absolute;\r\n    top: 200px;\r\n}\r\n\r\n.bt_changePic {\r\n    position: relative;\r\n    left: 50px;\r\n    top: 20px;\r\n    z-index: 9999;\r\n}\r\n\r\n.leftpart {\r\n    position: relative;\r\n    left: 100px;\r\n    width: 250px;\r\n    height: 600px;\r\n    top: 100px;\r\n    border-right: 2px solid rgb(11, 11, 18);\r\n}\r\n\r\n\r\n.avatar {\r\n    position: relative;\r\n    /* left: 150px;*/\r\n    width: 200px;\r\n    height: 200px;\r\n    top: 10px;\r\n    border-radius: 50%;\r\n    overflow: hidden;\r\n}\r\n\r\n.choosePic {\r\n    color: blue;\r\n}\r\n\r\n.avatar img {\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: cover;\r\n}\r\n\r\n.edithistory {\r\n    position: relative;\r\n    left: 150px;\r\n}\r\n\r\n.mycard {\r\n    position: relative;\r\n    left: 450px;\r\n    bottom: 120px;\r\n    width: 400px;\r\n    height: 460px;\r\n}\r\n\r\n.history {\r\n    position: relative;\r\n    left: 450px;\r\n    bottom: 50px;\r\n    width: 400px;\r\n    height: 300px;\r\n}\r\n\r\n.panel .p-panel-content {\r\n    word-wrap: break-word;\r\n}\r\n\r\n.edit-item {\r\n    position: relative;\r\n    width: 300px;\r\n    height: 50px;\r\n    /* bottom: 10px; */\r\n    left: 10px;\r\n}\r\n\r\n.save_button {\r\n    position: relative;\r\n    width: 70px;\r\n    height: 50px;\r\n    bottom: 10px;\r\n    left: 160px;\r\n}\r\n\r\n.tongzhi {\r\n    position: absolute;\r\n    left: 600px;\r\n    width: 400px;\r\n    top: 20px;\r\n}\r\n</style>\r\n\r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}