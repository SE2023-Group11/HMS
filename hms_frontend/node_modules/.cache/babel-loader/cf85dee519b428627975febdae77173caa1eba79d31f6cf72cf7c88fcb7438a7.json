{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, unref as _unref, createVNode as _createVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, withModifiers as _withModifiers, createBlock as _createBlock, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '../Pic/OIP.jpg';\nconst _withScopeId = n => (_pushScopeId(\"data-v-6e739717\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"Pic\"\n}, null, -1));\nconst _hoisted_2 = {\n  class: \"Pic1\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  src: _imports_0\n};\nconst _hoisted_4 = {\n  class: \"login\"\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"医院信息管理系统\", -1));\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"用户登录\", -1));\nconst _hoisted_7 = {\n  class: \"form-group\"\n};\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"uid\"\n}, \"用户id\", -1));\nconst _hoisted_9 = {\n  class: \"form-group\"\n};\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"password\"\n}, \"密码\", -1));\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_13 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_14 = {\n  class: \"tongzhi\"\n};\nconst _hoisted_15 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"xia\"\n}, [/*#__PURE__*/_createElementVNode(\"pre\", null, [/*#__PURE__*/_createTextVNode(\"\\n\\n        版权所有 2014-2022 北京航空航天大学\\n        京ICP备05004617-3文保网安备案号1101080018\\n        \"), /*#__PURE__*/_createElementVNode(\"br\"), /*#__PURE__*/_createTextVNode(\"\\n        地址：北京市海淀区学院路37号\\n        邮编：100191\\n        电话：82317114\\n        \")])], -1));\nimport { ref } from 'vue';\nimport axios from 'axios';\n//primevue\nimport InputText from 'primevue/inputtext';\nimport Button from 'primevue/button';\nimport Password from 'primevue/password';\nimport SelectButton from 'primevue/selectbutton';\nimport Message from 'primevue/message';\nexport default {\n  __name: 'LoginForm',\n  setup(__props) {\n    const uid = ref('P00000000000');\n    const password = ref('newpassword');\n    const options = ref(['患者身份进入', '非患者身份进入']);\n    const is_patient = ref('off');\n    const role = ref('patient'); //判断是不是患者\n    //用于判断登录是否成功的变量\n    const juglog = ref(0);\n    function loginbt() {\n      //首先判断是不是患者\n      if (is_patient.value === '患者身份进入') role.value = 'patient';else role.value = 'doctor';\n      console.log(role.value);\n      if (role.value == 'patient') {\n        axios.post('http://121.199.161.134:8080/loginPatient', null, {\n          params: {\n            uid: uid.value,\n            password: password.value\n          }\n        }).then(response => {\n          console.log(response.data.code);\n          //传送成功的情况下，判断信息是否正确\n          const jud = response.data.code;\n          console.log(response.data.data);\n          if (jud == 1) {\n            console.log(response.data);\n            sessionStorage.setItem('token', response.data.data);\n            sessionStorage.setItem('role', role.value); //y是患者，n是医生\n            juglog.value = 1;\n            window.location.href = \"/patientRoot\";\n          }\n          //将将返回的token存到session中\n          else if (jud == 2) {\n            sessionStorage.setItem('token', response.data.data);\n            sessionStorage.setItem('role', role.value); //y是患者，n是医生\n            juglog.value = 1;\n            window.location.href = \"/adminRoot\";\n          } else {\n            console.log('登录失败');\n            juglog.value = -1;\n          }\n        }).catch(error => {\n          console.error(error);\n          judlog.value = -1;\n        });\n      }\n      if (role.value == 'doctor') {\n        axios.post('http://121.199.161.134:8080/loginDoctor', null, {\n          params: {\n            uid: uid.value,\n            password: password.value\n          }\n        }).then(response => {\n          console.log(response.data.code);\n          //传送成功的情况下，判断信息是否正确\n          const jud = response.data.code;\n          console.log(typeof jud);\n          if (jud == 1) {\n            sessionStorage.setItem('token', response.data.data);\n            sessionStorage.setItem('role', role.value); //y是患者，n是医生\n            juglog.value = 1;\n            window.location.href = \"/doctorRoot\";\n          }\n          //将将返回的token存到session中\n          else if (jud == 2) {\n            sessionStorage.setItem('token', response.data.data);\n            sessionStorage.setItem('role', role.value); //y是患者，n是医生\n            juglog.value = 1;\n            console.log(sessionStorage.getItem('token'));\n            // window.location.href=\"/adminRoot\";\n          } else {\n            console.log('登录失败');\n            juglog.value = -1;\n          }\n        }).catch(error => {\n          console.error(error);\n          judlog.value = -1;\n        });\n      }\n    }\n    return (_ctx, _cache) => {\n      const _component_router_link = _resolveComponent(\"router-link\");\n      return _openBlock(), _createElementBlock(_Fragment, null, [_hoisted_1, _createElementVNode(\"div\", _hoisted_2, [!_ctx.imageUrl ? (_openBlock(), _createElementBlock(\"img\", _hoisted_3)) : _createCommentVNode(\"\", true)]), _createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _hoisted_6, _createElementVNode(\"form\", {\n        onSubmit: _cache[3] || (_cache[3] = _withModifiers((...args) => _ctx.submitForm && _ctx.submitForm(...args), [\"prevent\"]))\n      }, [_createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _createVNode(_unref(InputText), {\n        placeholder: '请输入您的id号或身份证号',\n        type: \"text\",\n        id: \"uid\",\n        modelValue: uid.value,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => uid.value = $event),\n        class: \"inp\"\n      }, null, 8, [\"modelValue\"])]), _createElementVNode(\"div\", _hoisted_9, [_hoisted_10, _createVNode(_unref(Password), {\n        placeholder: '请输入您的密码',\n        id: \"password\",\n        modelValue: password.value,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => password.value = $event),\n        style: {\n          \"width\": \"400px\",\n          \"height\": \"40px\"\n        }\n      }, null, 8, [\"modelValue\"])]), _hoisted_11, _createVNode(_unref(SelectButton), {\n        modelValue: is_patient.value,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => is_patient.value = $event),\n        options: options.value,\n        \"aria-labelledby\": \"basic\"\n      }, null, 8, [\"modelValue\", \"options\"]), _hoisted_12, _createElementVNode(\"div\", null, [_createTextVNode(\"            \"), _createVNode(_component_router_link, {\n        to: \"/register\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"用户注册\")]),\n        _: 1\n      }), _createTextVNode(\"      \"), _createVNode(_component_router_link, {\n        to: \"/ForgetPwd\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"忘记密码\")]),\n        _: 1\n      })]), _hoisted_13, _createVNode(_unref(Button), {\n        class: \"bttt\",\n        label: \"登录\",\n        onClick: loginbt\n      })], 32)]), _createElementVNode(\"div\", _hoisted_14, [_ctx.judlog == 1 ? (_openBlock(), _createBlock(_unref(Message), {\n        key: 0,\n        \"z-index\": \"9999999999999\",\n        severity: \"success\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"登录成功！\")]),\n        _: 1\n      })) : _createCommentVNode(\"\", true), _ctx.judlog == -1 ? (_openBlock(), _createBlock(_unref(Message), {\n        key: 1,\n        \"z-index\": \"9999999999999\",\n        severity: \"error\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"登录失败\")]),\n        _: 1\n      })) : _createCommentVNode(\"\", true)]), _hoisted_15], 64);\n    };\n  }\n};","map":{"version":3,"names":["ref","axios","InputText","Button","Password","SelectButton","Message","uid","password","options","is_patient","role","juglog","loginbt","value","console","log","post","params","then","response","data","code","jud","sessionStorage","setItem","window","location","href","catch","error","judlog","getItem"],"sources":["D:/Desktop/HMS-front-end/hms_frontend/src/views/LoginForm.vue"],"sourcesContent":["<template>\n    <div class=\"Pic\">\n        <!-- <img src=\"../Pic/yiyuan.jpg\" v-if=\"!imageUrl\" /> -->\n    </div>\n    <div class=\"Pic1\">\n        <img src=\"../Pic/OIP.jpg\" v-if=\"!imageUrl\" />\n    </div>\n    <div class=\"login\">\n\n        <h1>医院信息管理系统</h1>\n        <h2>用户登录</h2>\n        <form @submit.prevent=\"submitForm\">\n            <div class=\"form-group\">\n                <label for=\"uid\">用户id</label>\n                <InputText :placeholder=\"'请输入您的id号或身份证号'\" type=\"text\" id=\"uid\" v-model=\"uid\" class=\"inp\"/>\n            </div>\n\n            <div class=\"form-group\">\n                <label for=\"password\">密码</label>\n                <Password :placeholder=\"'请输入您的密码'\" id=\"password\" v-model=\"password\" style=\"width: 400px; height: 40px\" />\n            </div>\n            <br>\n            <SelectButton v-model=\"is_patient\" :options=\"options\" aria-labelledby=\"basic\" />\n            <br>\n            <div>\n                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                <router-link to=\"/register\">用户注册</router-link>\n                &nbsp;&nbsp;&nbsp;&nbsp;\n                <router-link to=\"/ForgetPwd\">忘记密码</router-link>\n            </div>\n            <br>\n            <Button class=\"bttt\" label=\"登录\" @click=\"loginbt\" />\n        </form>\n    </div>\n    <!-- 消息的通知 -->\n    <div class=\"tongzhi\">\n        <!-- 用户登录 -->\n        <Message z-index=9999999999999 v-if=\"judlog == 1\" severity=\"success\">登录成功！</Message>\n        <Message z-index=9999999999999 v-if=\"judlog == -1\" severity=\"error\">登录失败</Message>\n    </div>\n\n    <div class=\"xia\">\n        \n        <pre>\n\n\n        版权所有 2014-2022 北京航空航天大学\n        京ICP备05004617-3文保网安备案号1101080018\n        <br>\n        地址：北京市海淀区学院路37号\n        邮编：100191\n        电话：82317114\n        </pre>\n    </div>\n</template>\n  \n<script setup>\nimport { ref } from 'vue';\nimport axios from 'axios'\n//primevue\nimport InputText from 'primevue/inputtext';\nimport Button from 'primevue/button';\nimport Password from 'primevue/password';\nimport SelectButton from 'primevue/selectbutton';\nimport Message from 'primevue/message';\n\nconst uid = ref('P00000000000');\nconst password = ref('newpassword');\nconst options = ref(['患者身份进入', '非患者身份进入']);\nconst is_patient = ref('off');\nconst role = ref('patient')//判断是不是患者\n//用于判断登录是否成功的变量\nconst juglog = ref(0);\nfunction loginbt() {\n    //首先判断是不是患者\n    if (is_patient.value === '患者身份进入') role.value = 'patient';\n    else role.value = 'doctor';\n    console.log(role.value);\n    if (role.value == 'patient') {\n        axios.post('http://121.199.161.134:8080/loginPatient',null, {\n            params: {\n                uid: uid.value,\n                password: password.value,\n            }}\n        )\n            .then(response => {\n                console.log(response.data.code);\n                //传送成功的情况下，判断信息是否正确\n                const jud =response.data.code;\n                console.log(response.data.data);\n                if(jud == 1){\n                    console.log(response.data);\n                    sessionStorage.setItem('token', response.data.data);\n                    sessionStorage.setItem('role', role.value);//y是患者，n是医生\n                    juglog.value = 1;\n                    window.location.href=\"/patientRoot\";\n                }\n                //将将返回的token存到session中\n                else if(jud == 2){\n\n                    sessionStorage.setItem('token', response.data.data);\n                    sessionStorage.setItem('role', role.value);//y是患者，n是医生\n                    juglog.value = 1;\n                    window.location.href=\"/adminRoot\";\n                }\n                else{\n                    console.log('登录失败');\n                    juglog.value = -1;\n                }\n            })\n            .catch(error => {\n                console.error(error)\n                judlog.value = -1;\n            })\n    }\n    if (role.value == 'doctor') {\n        axios.post('http://121.199.161.134:8080/loginDoctor',null,{params: {\n                uid: uid.value,\n                password: password.value,\n            }}\n        )\n            .then(response => {\n                console.log(response.data.code);\n                //传送成功的情况下，判断信息是否正确\n                const jud =response.data.code;\n                console.log(typeof(jud));\n                if(jud == 1){\n                    sessionStorage.setItem('token', response.data.data);\n                    sessionStorage.setItem('role', role.value);//y是患者，n是医生\n                    juglog.value = 1;\n                    window.location.href=\"/doctorRoot\";\n                }\n                //将将返回的token存到session中\n                else if(jud == 2){\n                    sessionStorage.setItem('token', response.data.data);\n                    sessionStorage.setItem('role', role.value);//y是患者，n是医生\n                    juglog.value = 1;\n                    console.log(sessionStorage.getItem('token'));\n                    // window.location.href=\"/adminRoot\";\n                }\n                else{\n                    console.log('登录失败');\n                    juglog.value = -1;\n                }\n            })\n            .catch(error => {\n                console.error(error)\n                judlog.value = -1;\n            })\n    }\n\n}\n\n</script>\n  \n<style scoped>\n.Pic1 img {\n    position: absolute;\n    width: 100px;\n    top:0px;\n    right: 285px;\n}\n\n.Pic {\n    position: absolute;\n    background-image: url(\"../Pic/yiyuan.jpg\");\n    background-size: cover;\n    top: 0px;\n    width: 74%;\n    height: 100%;\n}\n.inp{\n    width: 200px;\n}\n.l1 {\n    position: absolute;\n    top: 10px;\n    right: 0;\n}\n\n.bttt {\n    position: relative;\n    width: 200px;\n    left: 35px;\n}\n\n.Pic img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n}\n\n.login {\n    position: absolute;\n    left: 75%;\n    top: 90px;\n    width: 350px;\n    margin: 0 auto;\n    padding: 20px;\n    /* border: 1px solid #ccc;\n    border-radius: 5px; */\n}\n\n.form-group {\n    display: flex;\n    flex-direction: column;\n    margin-bottom: 10px;\n}\n\n.tongzhi {\n    position: absolute;\n    left: 600px;\n    width: 400px;\n    top: 20px;\n    z-index: 999999999999999999999999;\n}\n\nlabel {\n    font-weight: bold;\n    margin-bottom: 5px;\n}\n\n.xia {\n    position: absolute;\n    bottom: 0;\n    font: 5px;\n    left: 1140px;\n    width: 300px;\n    \n}\n\ninput[type='uid'],\ninput[type='password'],\ninput[type='text'] {\n    padding: 10px;\n    border-radius: 3px;\n    border: 1px solid #ccc;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}